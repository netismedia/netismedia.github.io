{"version":3,"sources":["webpack:///../../../src/components/VTextField/index.ts","webpack:///./src/views/Assets.vue?4143","webpack:///./src/lib/s3_shim.js","webpack:///src/views/Assets.vue","webpack:///./src/views/Assets.vue?e29d","webpack:///../../../src/components/VFileInput/VFileInput.ts","webpack:///./src/views/Assets.vue?4716","webpack:///./node_modules/aws-sdk/lib/services/s3.js","webpack:///./src/assets/l_small.png","webpack:///./src/views/Assets.vue?c4b3","webpack:///./node_modules/aws-sdk/lib/s3/managed_upload.js","webpack:///./node_modules/aws-sdk/clients/s3.js","webpack:///./node_modules/core-js/modules/es.array.last-index-of.js","webpack:///../../../src/components/VChip/VChip.ts","webpack:///./node_modules/core-js/internals/array-last-index-of.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","assets","length","_l","asset","index","key","on","$event","stopPropagation","displayAsset","_v","_s","onDeleteClick","onEditClick","_e","pageReady","onFabAddClick","model","value","callback","$$v","dlgUpload","expression","fileSelectLabel","loading","file","directives","name","rawName","percent","infoText","onDlgUploadCancelClick","onBtnUploadClick","dlgEdit","rules","required","editedText","onBtnConfirmEditClick","dlgConfirmDel","assetNameToBeDel","deleteAsset","imageAssetPreview","imgAssetUrl","videoAssetPreview","ref","videoAssetUrl","staticRenderFns","getMinioS3Resource","S3","endpoint","accessKeyId","secretAccessKey","region","s3ForcePathStyle","signatureVersion","data","computed","watch","$store","commit","$refs","videoPlayer","pause","created","loadData","methods","encodeFilename","idx","base","substring","uploadToS3Server","uploadToOldS3Server","editedAssetId","editedIndex","presignAssetURL","assetUrl","fileName","managedUpload","abort","assetIndexToBeDel","selectedAsset","VTextField","prop","event","props","chips","clearable","type","default","counterSizeString","counterString","placeholder","prependIcon","readonly","showSize","Boolean","validator","v","includes","smallChips","truncateLength","Number","val","classes","computedCounterValue","fileCount","isMultiple","lazyValue","$vuetify","lang","t","bytes","internalArrayValue","reduce","size","internalValue","get","set","isDirty","isLabelActive","$attrs","hasOwnProperty","text","map","truncatedText","hasChips","handler","immediate","input","clearableCallback","genChips","small","genInput","genPrependSlot","icon","genIcon","genSlot","genSelectionText","genSelections","children","$scopedSlots","class","selection","genTextFieldSlot","node","click","onInput","files","e","onKeyDown","truncateText","str","charsKeepOneSide","Math","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VCol","VContainer","VDialog","VDivider","VFileInput","VIcon","VImg","VList","VListItem","VProgressLinear","VRow","VSpacer","AWS","v4Credentials","resolveRegionalEndpointsFlag","regionUtil","operationsWith200StatusCodeError","regionRedirectErrorCodes","util","update","prototype","getSignatureVersion","request","defaultApiVersion","api","userDefinedVersion","_originalConfig","regionDefinedVersion","config","isPresigned","getSignerClass","Signers","RequestSigner","getVersion","validateService","msg","messages","s3BucketEndpoint","push","join","error","Error","message","shouldDisableBodySigning","signerClass","s3DisableBodySigning","V4","httpRequest","protocol","setupRequestListeners","prependListener","addListener","validateScheme","validateBucketName","optInUsEast1RegionalEndpoint","removeListener","EventListeners","Core","VALIDATE_REGION","addContentType","computeContentMd5","computeSseCustomerKeyMd5","populateURI","addExpect100Continue","extractError","hoistPayloadMember","extractData","prepareSignedUrl","COMPUTE_SHA256","disableBodySigning","isAccessPointApplicable","validateAccessPointArn","validateArnRegion","populateUriFromAccessPoint","validateBucketEndpoint","correctBucketRegionFromCache","onAsync","requestBucketRegion","isBrowser","reqRegionForNetworkingError","req","params","scheme","sensitive","SSECustomerKey","CopySourceSSECustomerKey","code","Bucket","service","inputShape","operations","operation","inputMembers","members","ARN","validate","parsedArn","parse","_parsedAccessPointArn","resource","indexOf","delimiter","split","accessPoint","accessPointPrefix","accountId","isDnsCompatible","match","useArnRegion","loadUseArnRegionConfig","regionFromArn","clientRegion","getEndpointSuffix","useAccelerateEndpoint","envName","configName","originalConfig","undefined","s3UseArnRegion","isNode","trim","toLowerCase","retryable","profiles","profile","getProfilesFromSharedConfig","iniLoader","AWS_PROFILE","defaultProfile","bucket","Key","slashIndex","copy","prefix","substr","isValidAccelerateOperation","invalidOperations","s3UsEast1RegionalEndpoint","env","sharedConfig","clientConfig","hostname","insertPoint","regionalEndpoint","updateEndpoint","b","pathStyleBucketName","useDualstack","port","host","virtualHostedBucket","removeVirtualHostedBucketFromPath","path","encodedS3Key","uriEscapePath","replace","RegExp","accessPointArn","serviceName","dnsSuffix","encodedArn","uriEscape","len","headers","Body","stream","Stream","method","contentType","body","replaceFn","_","charsetName","toUpperCase","charset","computableChecksumOperations","putBucketCors","putBucketLifecycle","putBucketLifecycleConfiguration","putBucketTagging","deleteObjects","putBucketReplication","putObjectLegalHold","putObjectRetention","putObjectLockConfiguration","willComputeChecksums","computeChecksums","Buffer","isBuffer","Object","call","ContentMD5","md5","crypto","keys","each","header","bucketName","sslEnabled","domain","ipAddress","dots","successfulResponse","resp","httpResponse","toString","statusCode","retryableError","_requestRegionForBucket","bucketRegionCache","updateReqBucketRegion","_super","Service","s3Config","newConfig","Host","_asm","currentState","LocationConstraint","createBucketConfiguration","CreateBucketConfiguration","clearBucketRegionCache","extractRequestIds","cachedRegion","codes","304","403","400","404","XML","Parser","Region","Code","Message","done","reqOperation","reqParams","MaxKeys","regionReq","send","getRegionReq","listObjects","buckets","i","requestRegion","extendedRequestId","cfId","requestId","getSignedUrl","expires","Expires","makeRequest","presign","defer","createPresignedPost","boundParams","self","finalizePost","url","urlFormat","fields","preparePostFields","credentials","Fields","Conditions","pathname","getCredentials","err","conditions","expiresInSeconds","now","getSkewCorrectedDate","slice","signingDate","date","iso8601","shortDate","scope","createScope","credential","field","sessionToken","condition","Policy","preparePostPolicy","Date","valueOf","hmac","getSigningKey","expiration","base64","encode","JSON","stringify","noPresignedContentLength","ContentLength","createBucket","globalEndpoint","upload","options","merge","uploader","ManagedUpload","addPromisesToClass","PromiseDependency","getSignedUrlPromise","promisifyMethod","deletePromisesFromClass","addPromises","module","exports","byteLength","string","inherit","constructor","SequentialExecutor","sliceFn","parts","completeInfo","fillQueue","configure","partSize","minPartSize","queueSize","leavePartsOnError","tags","Array","isArray","bindServiceObject","validateBody","adjustTotalBytes","maxTotalParts","failed","runFill","fillBuffer","fillStream","partBuffers","cleanup","isDoneChunking","numParts","totalPartNumbers","doneParts","finishMultiPart","singlePart","buffer","toBuffer","arraySliceFn","__super__","totalBytes","newPartSize","ceil","partPos","totalChunkedBytes","totalUploadedBytes","activeParts","multipartReq","partBufferLength","bodyLen","nextChunk","endPos","min","buf","read","pbuf","concat","rest","isDoneSending","chunk","partNumber","Tagging","getTaggingHeader","putObject","_managedUpload","progress","finishSinglePart","ETag","UploadId","uploadPart","queueChunks","createMultipartUpload","kvPairStrings","Value","partParams","PartNumber","partInfo","_lastUploadedBytes","removeAllListeners","resume","abortMultipartUpload","part","completeParams","MultipartUpload","Parts","completeMultipartUpload","Location","String","putObjectTagging","TagSet","d","httpReq","info","loaded","total","emit","mixin","promise","apiLoader","services","defineService","defineProperty","paginators","pagination","waiters","enumerable","configurable","$","lastIndexOf","target","proto","forced","active","activeClass","chipGroup","close","closeIcon","disabled","draggable","filter","filterIcon","label","link","outlined","pill","tag","textColor","proxyClass","groupClasses","hasClose","isClickable","breakingProps","original","replacement","genFilter","left","genClose","right","genContent","$slots","tabindex","setBackgroundColor","color","h","setTextColor","toIndexedObject","toInteger","toLength","arrayMethodIsStrict","arrayMethodUsesToLength","nativeLastIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","FORCED","searchElement","apply","arguments","O"],"mappings":"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","file":"js/assets.31e6fe3b.js","sourcesContent":["import VTextField from './VTextField'\n\nexport { VTextField }\nexport default VTextField\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"pa-0 pa-md-3\",attrs:{\"fluid\":\"\"}},[(_vm.assets.length>0)?_c('v-list',{staticClass:\"ly-list\"},[_vm._l((_vm.assets),function(asset,index){return [_c('v-list-item',{key:asset[0]},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"10\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.displayAsset(asset)}}},[_vm._v(\" \"+_vm._s(asset[1])+\" \")]),_c('v-col',{staticClass:\"text-right\",attrs:{\"cols\":\"6\",\"md\":\"2\",\"offset\":\"6\",\"offset-md\":\"0\"}},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onDeleteClick(asset, index)}}},[_c('v-icon',[_vm._v(\"mdi-delete-forever\")])],1),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onEditClick(asset, index)}}},[_c('v-icon',[_vm._v(\"mdi-pencil\")])],1)],1)],1)],1),(index!==(_vm.assets.length-1))?_c('v-divider',{key:index}):_vm._e()]})],2):_vm._e(),((_vm.assets.length==0) && _vm.pageReady)?_c('v-row',{staticClass:\"centered-row\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\" Belum ada asset media! \")]),_c('v-card-text',[_vm._v(\" Tambahkan asset media dengan meng-klik tombol yang ada di sudut kanan-bawah layar! \")])],1)],1)],1):_vm._e(),_c('v-btn',{attrs:{\"fab\":\"\",\"fixed\":\"\",\"bottom\":\"\",\"right\":\"\",\"dark\":\"\",\"color\":\"pink\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onFabAddClick($event)}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1),_c('v-dialog',{attrs:{\"max-width\":\"360\",\"persistent\":\"\"},model:{value:(_vm.dlgUpload),callback:function ($$v) {_vm.dlgUpload=$$v},expression:\"dlgUpload\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Upload Asset\")]),_c('v-card-text',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-file-input',{attrs:{\"label\":_vm.fileSelectLabel,\"accept\":\".mp4,.jpg,.png,.jpeg\",\"hide-details\":\"\",\"disabled\":_vm.loading},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}})],1),_c('v-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"cols\":\"12\"}},[_c('v-progress-linear',{attrs:{\"value\":_vm.percent}})],1),_c('v-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"text-center\",attrs:{\"cols\":\"12\"}},[_vm._v(\" \"+_vm._s(_vm.infoText)+\" \")])],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"warning\"},on:{\"click\":_vm.onDlgUploadCancelClick}},[_vm._v(\"Batal\")]),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"primary\",\"disabled\":null===_vm.file,\"loading\":_vm.loading},on:{\"click\":_vm.onBtnUploadClick}},[_vm._v(\"Upload\")]),_c('v-spacer')],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"360\",\"persistent\":\"\"},model:{value:(_vm.dlgEdit),callback:function ($$v) {_vm.dlgEdit=$$v},expression:\"dlgEdit\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Edit Asset\")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"label\":\"Nama asset\",\"clearable\":\"\",\"validate-on-blur\":\"\",\"rules\":[_vm.rules.required]},model:{value:(_vm.editedText),callback:function ($$v) {_vm.editedText=$$v},expression:\"editedText\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.dlgEdit=false}}},[_vm._v(\"Batal\")]),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.onBtnConfirmEditClick}},[_vm._v(\"Ok\")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"320\"},model:{value:(_vm.dlgConfirmDel),callback:function ($$v) {_vm.dlgConfirmDel=$$v},expression:\"dlgConfirmDel\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Konfirmasi\")]),_c('v-card-text',[_vm._v(\" Hapus \"+_vm._s(_vm.assetNameToBeDel)+\"? \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"primary\",\"disabled\":_vm.loading},on:{\"click\":function($event){_vm.dlgConfirmDel=false}}},[_vm._v(\"Batal\")]),_c('v-btn',{attrs:{\"text\":\"\",\"color\":\"warning\",\"disabled\":_vm.loading},on:{\"click\":_vm.deleteAsset}},[_vm._v(\"Ok\")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"640\"},model:{value:(_vm.imageAssetPreview),callback:function ($$v) {_vm.imageAssetPreview=$$v},expression:\"imageAssetPreview\"}},[_c('v-card',[_c('v-img',{attrs:{\"src\":_vm.imgAssetUrl,\"lazy-src\":require(\"@/assets/l_small.png\")}})],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"640\"},model:{value:(_vm.videoAssetPreview),callback:function ($$v) {_vm.videoAssetPreview=$$v},expression:\"videoAssetPreview\"}},[_c('v-card',[_c('video',{ref:\"videoPlayer\",attrs:{\"src\":_vm.videoAssetUrl,\"width\":\"640\",\"height\":\"360\",\"controls\":\"\"}})])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","'use strict'\n\nimport S3 from 'aws-sdk/clients/s3'\n\nexport function getMinioS3Resource() {\n    return new S3({\n        endpoint: 'https://play.minio.io',\n        accessKeyId: 'Q3AM3UQ867SPQQA43P2F',\n        secretAccessKey: 'zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG',\n        region: 'us-east-1',\n        s3ForcePathStyle: true,\n        signatureVersion: 'v4'\n    })\n}\n","<template>\n  <v-container fluid class=\"pa-0 pa-md-3\">\n    <v-list v-if=\"assets.length>0\" class=\"ly-list\">\n      <template v-for=\"(asset, index) of assets\">\n        <v-list-item :key=\"asset[0]\">\n          <v-row no-gutters>\n            <v-col cols=\"12\" md=\"10\" @click.stop=\"displayAsset(asset)\">\n              {{ asset[1] }}\n            </v-col>\n            <v-col cols=\"6\" md=\"2\" offset=\"6\" offset-md=\"0\" class=\"text-right\">\n              <v-btn icon @click.stop=\"onDeleteClick(asset, index)\">\n                <v-icon>mdi-delete-forever</v-icon>\n              </v-btn>\n              <v-btn icon @click.stop=\"onEditClick(asset, index)\">\n                <v-icon>mdi-pencil</v-icon>\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-list-item>\n        <v-divider :key=\"index\" v-if=\"index!==(assets.length-1)\"></v-divider>\n      </template>\n    </v-list>\n    <v-row v-if=\"(assets.length==0) && pageReady\" class=\"centered-row\">\n      <v-col cols=\"12\" md=\"6\">\n        <v-card>\n          <v-card-title>\n            Belum ada asset media!\n          </v-card-title>\n          <v-card-text>\n            Tambahkan asset media dengan meng-klik tombol yang ada di sudut \n            kanan-bawah layar!\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n    <v-btn fab fixed bottom right dark color=\"pink\" @click.stop=\"onFabAddClick\">\n      <v-icon>mdi-plus</v-icon>\n    </v-btn>\n    <v-dialog v-model=\"dlgUpload\" max-width=\"360\" persistent>\n      <v-card>\n        <v-card-title>Upload Asset</v-card-title>\n        <v-card-text>\n          <v-row>\n            <v-col cols=\"12\">\n              <v-file-input :label=\"fileSelectLabel\" v-model=\"file\"\n                 accept=\".mp4,.jpg,.png,.jpeg\" hide-details :disabled=\"loading\"\n              >\n              </v-file-input>\n            </v-col>\n            <v-col cols=\"12\" v-show=\"loading\">\n              <v-progress-linear :value=\"percent\"></v-progress-linear>\n            </v-col>\n            <v-col cols=\"12\" v-show=\"loading\" class=\"text-center\">\n              {{ infoText }}\n            </v-col>\n          </v-row>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text color=\"warning\" @click=\"onDlgUploadCancelClick\">Batal</v-btn>\n          <v-btn text color=\"primary\" :disabled=\"null===file\" @click=\"onBtnUploadClick\" :loading=\"loading\">Upload</v-btn>\n          <v-spacer></v-spacer>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"dlgEdit\" max-width=\"360\" persistent>\n      <v-card>\n        <v-card-title>Edit Asset</v-card-title>\n        <v-card-text>\n          <v-text-field label=\"Nama asset\" v-model=\"editedText\" clearable\n            validate-on-blur :rules=\"[rules.required]\"></v-text-field>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text color=\"primary\" @click=\"dlgEdit=false\">Batal</v-btn>\n          <v-btn text color=\"primary\" @click=\"onBtnConfirmEditClick\" :loading=\"loading\">Ok</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog max-width=\"320\" v-model=\"dlgConfirmDel\">\n      <v-card>\n        <v-card-title>Konfirmasi</v-card-title>\n        <v-card-text>\n          Hapus {{ assetNameToBeDel }}?\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text color=\"primary\" :disabled=\"loading\" @click=\"dlgConfirmDel=false\">Batal</v-btn>\n          <v-btn text color=\"warning\" :disabled=\"loading\" @click=\"deleteAsset\">Ok</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"imageAssetPreview\" max-width=\"640\">\n      <v-card>\n        <v-img :src=\"imgAssetUrl\" lazy-src=\"@/assets/l_small.png\"></v-img>\n      </v-card>\n    </v-dialog>\n    <v-dialog v-model=\"videoAssetPreview\" max-width=\"640\">\n      <v-card>\n        <video :src=\"videoAssetUrl\" width=\"640\" height=\"360\" controls\n          ref=\"videoPlayer\"></video>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\n\"use strict\"\n\nimport S3 from 'aws-sdk/clients/s3'\nimport { API_URL, OLD_S3_SERVER } from '@/config'\nimport { deleteWithAuth, getWithAuth, postWithAuth } from '@/lib/fetch_utils'\nimport { fileExtToAssetType, getMediaFileExtension } from '@/lib/utils'\nimport { s3PreSignWCache } from '@/lib/aws_lib'\nimport { getMinioS3Resource } from '@/lib/s3_shim.js'\n\nexport default {\n  name: \"Assets\",\n  data: () => ({\n    assetIndexToBeDel: -1,\n    assetNameToBeDel: '',\n    assets: [],\n    dlgConfirmDel: false,\n    dlgEdit: false,\n    dlgUpload: false,\n    editedIndex: -1,\n    editedText: '',\n    fileName: '',\n    file: null,\n    imageAssetPreview: false,\n    imgAssetUrl: \"\",\n    loading: false,\n    pageReady: false,\n    percent: 0,\n    selectedAsset: null,\n    videoAssetPreview: false,\n    videoAssetUrl: \"\",\n    rules: {\n      required: function (v) {\n        if (null === v) return \"Harus diisi!\"\n        if (v.length < 2) return \"Terlalu pendek!\"\n        return true\n      }\n    }\n  }),\n  computed: {\n    infoText() {\n      if (0 === this.percent) {\n        return 'Initializing upload ...'\n      } else if (100 === this.percent) {\n        return '100% uploaded. Analyzing...'\n      } else {\n        return `${this.percent}% uploaded ...`\n      }\n    },\n    fileSelectLabel() {\n      if (null === this.file) {\n        return \"Klik di sini untuk memilih file!\"\n      } else {\n        return \"File terpilih\"\n      }\n    },\n  },\n  watch: {\n    loading: function() {\n      this.$store.commit('SET_LOADING', this.loading)\n    },\n    videoAssetPreview: function() {\n      if (!this.videoAssetPreview) {\n        this.$refs.videoPlayer.pause()\n      }\n    },\n  },\n  created() {\n    this.$store.commit(\"SET_TOOLBAR\", {title:\"Assets\"})\n    this.loadData()\n  },\n  methods: {\n    loadData: async function() {\n      this.loading = true\n      let resp = await getWithAuth(`${API_URL}/assets`)\n      this.loading = false\n      this.pageReady = true\n      if (200 !== resp.code) return\n      this.assets = resp.data.rows\n    },\n    onBtnUploadClick: async function() {\n      if (OLD_S3_SERVER) {\n        await this.uploadToOldS3Server()\n      } else {\n        await this.uploadToS3Server()\n      }\n    },\n    encodeFilename(name) {\n      let idx = name.lastIndexOf('.')\n      if (-1 === idx) {\n        return undefined\n      }\n      let base = btoa(name.substring(0, idx)).replace(/=/g, '')\n      return base + name.substring(idx)\n    },\n    uploadToS3Server: async function() {\n      let userId = this.$store.state.credentials.email\n      let userIdB64 = btoa(userId).replace(/=/g, '')\n      let fname = this.encodeFilename(this.file.name)\n      if (undefined === fname) {\n        this.$store.commit('SHOW_APP_ALERT', {\n          title: 'Error',\n          text: 'Invalid filename!'\n        })\n        return\n      }\n      let env = this.$store.state.stsCreds.env\n      let s3 = new S3()\n      this.percent = 0\n      let params = {\n        Bucket: env.s3_bucket,\n        Key: `${env.application_id}/uploads/${userIdB64}/${fname}`,\n        ContentType: this.file.type,\n        Body: this.file\n      }\n      this.managedUpload = s3.upload(params)\n      let self = this\n      this.managedUpload.on('httpUploadProgress', progress => {\n        self.percent = Math.round(100*progress.loaded/progress.total)\n      })\n      this.loading = true\n      try {\n        await this.managedUpload.promise()\n      } catch(e) {\n        this.$store.commit('SHOW_APP_ALERT', {\n          title: 'Error',\n          text: e\n        })\n        this.dlgUpload = false\n        this.loading = false\n        return\n      }\n      let resp = await postWithAuth(`${API_URL}/assets`, {fname: fname})\n      this.loading = false\n      this.dlgUpload = false\n      if (200 !== resp.code) {\n        this.$store.commit('SHOW_APP_ALERT', {\n          title: 'Error',\n          text: resp.message\n        })\n        return\n      }\n      let asset = [\n        resp.data,\n        this.file.name,\n        fileExtToAssetType(this.file.name),\n        Math.round((new Date())/1000)\n      ]\n      this.assets.unshift(asset)\n    },\n    uploadToOldS3Server: async function() {\n      let userId = this.$store.state.credentials.email\n      let userIdB64 = btoa(userId).replace(/=/g, '')\n      let fname = this.encodeFilename(this.file.name)\n      if (undefined === fname) {\n        this.$store.commit('SHOW_APP_ALERT', {\n          title: 'Error',\n          text: 'Invalid filename!'\n        })\n        return\n      }\n      let env = this.$store.state.stsCreds.env\n      let s3 = getMinioS3Resource()\n      // Check bucket existence! Create it if necessary!\n      const bucket = 'cahkefao' // NOTE! This is special!\n      try {\n        let _resp = await s3.headBucket({ Bucket: bucket }).promise()\n        if(200 !== _resp.$response.httpResponse.statusCode) {\n          console.error(_resp.$response)\n          return\n        }\n      } catch (error) {\n        if (404 === error.statusCode) {\n          try {\n            let _r = await s3.createBucket({Bucket: bucket}).promise()\n            console.debug(_r)\n          } catch (err) {\n            console.error(error)\n            return\n          }\n        }\n      }\n\n      this.percent = 0\n      let params = {\n        Bucket: bucket,\n        Key: `${env.application_id}/uploads/${userIdB64}/${fname}`,\n        ContentType: this.file.type,\n        Body: this.file\n      }\n      this.managedUpload = s3.upload(params)\n      let self = this\n      this.managedUpload.on('httpUploadProgress', progress => {\n        self.percent = Math.round(100*progress.loaded/progress.total)\n      })\n      this.loading = true\n      try {\n        await this.managedUpload.promise()\n      } catch(e) {\n        this.$store.commit('SHOW_APP_ALERT', {\n          title: 'Error',\n          text: e\n        })\n        this.dlgUpload = false\n        this.loading = false\n        return\n      }\n      let resp = await postWithAuth(`${API_URL}/assets?primitive=1`, {fname: fname})\n      this.loading = false\n      this.dlgUpload = false\n      if (200 !== resp.code) {\n        this.$store.commit('SHOW_APP_ALERT', {\n          title: 'Error',\n          text: resp.message\n        })\n        return\n      }\n      let asset = [\n        resp.data,\n        this.file.name,\n        fileExtToAssetType(this.file.name),\n        Math.round((new Date())/1000)\n      ]\n      this.assets.unshift(asset)\n    },\n    onEditClick(asset, index) {\n      this.editedAssetId = asset[0]\n      this.editedText = asset[1]\n      this.editedIndex = index\n      this.dlgEdit = true\n    },\n    presignAssetURL() {\n      let userId = this.$store.state.credentials.email\n      let assetId = this.selectedAsset[0]\n      let ext = getMediaFileExtension(this.selectedAsset[2])\n      let stsCreds = this.$store.state.stsCreds\n      let env = stsCreds.env\n      let key = `${env.application_id}/users/${userId}/assets/${assetId}.${ext}`\n      let assetUrl = s3PreSignWCache(env.s3_bucket, key, 3600)\n      return assetUrl\n    },\n    onBtnConfirmEditClick: async function() {\n      if (this.editedText.length===0) return\n      let asset = this.assets[this.editedIndex]\n      let params = { name: this.editedText }\n      this.loading = true\n      let resp = await postWithAuth(`${API_URL}/assets/${asset[0]}`, params)\n      this.loading = false\n      this.dlgEdit = false\n      if (200 !== resp.code) {\n        this.$store.commit('SHOW_APP_ALERT', {\n          title: 'Error',\n          text: resp.message\n        })\n        return\n      }\n      asset[1] = this.editedText\n    },\n    onFabAddClick() {\n      this.file = null\n      this.fileName = ''\n      this.dlgUpload = true\n    },\n    onDlgUploadCancelClick() {\n      if (this.loading) {\n        this.managedUpload.abort()\n        this.loading = false\n      }\n      this.dlgUpload = false\n    },\n    onDeleteClick (asset, index) {\n      this.assetIndexToBeDel = index\n      this.assetNameToBeDel = asset[1]\n      this.dlgConfirmDel = true\n    },\n    deleteAsset: async function() {\n      let asset = this.assets[this.assetIndexToBeDel]\n      this.loading = true\n      let resp = await deleteWithAuth(`${API_URL}/assets/${asset[0]}`)\n      this.loading = false\n      this.dlgConfirmDel = false\n      if (200 !== resp.code) {\n        this.$store.commit('SHOW_APP_ALERT', {\n          title: 'Error',\n          text: resp.message\n        })\n        return\n      }\n      this.assets.splice(this.assetIndexToBeDel, 1)\n    },\n    displayAsset(asset) {\n      this.selectedAsset = asset\n      switch (asset[2]) {\n        case 0:\n          this.videoAssetUrl = this.presignAssetURL()\n          this.videoAssetPreview = true\n          break\n        case 1:\n        case 2:\n          this.imgAssetUrl = this.presignAssetURL()\n          this.imageAssetPreview = true\n          break\n        default:\n          break\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.ly-list {\n  margin-bottom: 64px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Assets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Assets.vue?vue&type=script&lang=js&\"","// Styles\nimport './VFileInput.sass'\n\n// Extensions\nimport VTextField from '../VTextField'\n\n// Components\nimport { VChip } from '../VChip'\n\n// Types\nimport { PropValidator } from 'vue/types/options'\n\n// Utilities\nimport { deepEqual, humanReadableFileSize, wrapInArray } from '../../util/helpers'\nimport { consoleError } from '../../util/console'\n\nexport default VTextField.extend({\n  name: 'v-file-input',\n\n  model: {\n    prop: 'value',\n    event: 'change',\n  },\n\n  props: {\n    chips: Boolean,\n    clearable: {\n      type: Boolean,\n      default: true,\n    },\n    counterSizeString: {\n      type: String,\n      default: '$vuetify.fileInput.counterSize',\n    },\n    counterString: {\n      type: String,\n      default: '$vuetify.fileInput.counter',\n    },\n    placeholder: String,\n    prependIcon: {\n      type: String,\n      default: '$file',\n    },\n    readonly: {\n      type: Boolean,\n      default: false,\n    },\n    showSize: {\n      type: [Boolean, Number],\n      default: false,\n      validator: (v: boolean | number) => {\n        return (\n          typeof v === 'boolean' ||\n          [1000, 1024].includes(v)\n        )\n      },\n    } as PropValidator<boolean | 1000 | 1024>,\n    smallChips: Boolean,\n    truncateLength: {\n      type: [Number, String],\n      default: 22,\n    },\n    type: {\n      type: String,\n      default: 'file',\n    },\n    value: {\n      default: undefined,\n      validator: val => {\n        return wrapInArray(val).every(v => v != null && typeof v === 'object')\n      },\n    } as PropValidator<File | File[]>,\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VTextField.options.computed.classes.call(this),\n        'v-file-input': true,\n      }\n    },\n    computedCounterValue (): string {\n      const fileCount = (this.isMultiple && this.lazyValue)\n        ? this.lazyValue.length\n        : (this.lazyValue instanceof File) ? 1 : 0\n\n      if (!this.showSize) return this.$vuetify.lang.t(this.counterString, fileCount)\n\n      const bytes = this.internalArrayValue.reduce((bytes: number, { size = 0 }: File) => {\n        return bytes + size\n      }, 0)\n\n      return this.$vuetify.lang.t(\n        this.counterSizeString,\n        fileCount,\n        humanReadableFileSize(bytes, this.base === 1024)\n      )\n    },\n    internalArrayValue (): File[] {\n      return wrapInArray(this.internalValue)\n    },\n    internalValue: {\n      get (): File[] {\n        return this.lazyValue\n      },\n      set (val: File | File[]) {\n        this.lazyValue = val\n        this.$emit('change', this.lazyValue)\n      },\n    },\n    isDirty (): boolean {\n      return this.internalArrayValue.length > 0\n    },\n    isLabelActive (): boolean {\n      return this.isDirty\n    },\n    isMultiple (): boolean {\n      return this.$attrs.hasOwnProperty('multiple')\n    },\n    text (): string[] {\n      if (!this.isDirty) return [this.placeholder]\n\n      return this.internalArrayValue.map((file: File) => {\n        const {\n          name = '',\n          size = 0,\n        } = file\n\n        const truncatedText = this.truncateText(name)\n\n        return !this.showSize\n          ? truncatedText\n          : `${truncatedText} (${humanReadableFileSize(size, this.base === 1024)})`\n      })\n    },\n    base (): 1000 | 1024 | undefined {\n      return typeof this.showSize !== 'boolean' ? this.showSize : undefined\n    },\n    hasChips (): boolean {\n      return this.chips || this.smallChips\n    },\n  },\n\n  watch: {\n    readonly: {\n      handler (v) {\n        if (v === true) consoleError('readonly is not supported on <v-file-input>', this)\n      },\n      immediate: true,\n    },\n    value (v) {\n      const value = this.isMultiple ? v : v ? [v] : []\n      if (!deepEqual(value, this.$refs.input.files)) {\n        // When the input value is changed programatically, clear the\n        // internal input's value so that the `onInput` handler\n        // can be triggered again if the user re-selects the exact\n        // same file(s). Ideally, `input.files` should be\n        // manipulated directly but that property is readonly.\n        this.$refs.input.value = ''\n      }\n    },\n  },\n\n  methods: {\n    clearableCallback () {\n      this.internalValue = this.isMultiple ? [] : undefined\n      this.$refs.input.value = ''\n    },\n    genChips () {\n      if (!this.isDirty) return []\n\n      return this.text.map((text, index) => this.$createElement(VChip, {\n        props: { small: this.smallChips },\n        on: {\n          'click:close': () => {\n            const internalValue = this.internalValue\n            internalValue.splice(index, 1)\n            this.internalValue = internalValue // Trigger the watcher\n          },\n        },\n      }, [text]))\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      // We should not be setting value\n      // programmatically on the input\n      // when it is using type=\"file\"\n      delete input.data!.domProps!.value\n\n      // This solves an issue in Safari where\n      // nothing happens when adding a file\n      // do to the input event not firing\n      // https://github.com/vuetifyjs/vuetify/issues/7941\n      delete input.data!.on!.input\n      input.data!.on!.change = this.onInput\n\n      return [this.genSelections(), input]\n    },\n    genPrependSlot () {\n      if (!this.prependIcon) return null\n\n      const icon = this.genIcon('prepend', () => {\n        this.$refs.input.click()\n      })\n\n      return this.genSlot('prepend', 'outer', [icon])\n    },\n    genSelectionText (): string[] {\n      const length = this.text.length\n\n      if (length < 2) return this.text\n      if (this.showSize && !this.counter) return [this.computedCounterValue]\n      return [this.$vuetify.lang.t(this.counterString, length)]\n    },\n    genSelections () {\n      const children = []\n\n      if (this.isDirty && this.$scopedSlots.selection) {\n        this.internalArrayValue.forEach((file: File, index: number) => {\n          if (!this.$scopedSlots.selection) return\n\n          children.push(\n            this.$scopedSlots.selection({\n              text: this.text[index],\n              file,\n              index,\n            })\n          )\n        })\n      } else {\n        children.push(this.hasChips && this.isDirty ? this.genChips() : this.genSelectionText())\n      }\n\n      return this.$createElement('div', {\n        staticClass: 'v-file-input__text',\n        class: {\n          'v-file-input__text--placeholder': this.placeholder && !this.isDirty,\n          'v-file-input__text--chips': this.hasChips && !this.$scopedSlots.selection,\n        },\n      }, children)\n    },\n    genTextFieldSlot () {\n      const node = VTextField.options.methods.genTextFieldSlot.call(this)\n\n      node.data!.on = {\n        ...(node.data!.on || {}),\n        click: () => this.$refs.input.click(),\n      }\n\n      return node\n    },\n    onInput (e: Event) {\n      const files = [...(e.target as HTMLInputElement).files || []]\n\n      this.internalValue = this.isMultiple ? files : files[0]\n\n      // Set initialValue here otherwise isFocused\n      // watcher in VTextField will emit a change\n      // event whenever the component is blurred\n      this.initialValue = this.internalValue\n    },\n    onKeyDown (e: KeyboardEvent) {\n      this.$emit('keydown', e)\n    },\n    truncateText (str: string) {\n      if (str.length < Number(this.truncateLength)) return str\n      const charsKeepOneSide = Math.floor((Number(this.truncateLength) - 1) / 2)\n      return `${str.slice(0, charsKeepOneSide)}${str.slice(str.length - charsKeepOneSide)}`\n    },\n  },\n})\n","import { render, staticRenderFns } from \"./Assets.vue?vue&type=template&id=14a26e50&scoped=true&\"\nimport script from \"./Assets.vue?vue&type=script&lang=js&\"\nexport * from \"./Assets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Assets.vue?vue&type=style&index=0&id=14a26e50&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14a26e50\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VFileInput } from 'vuetify/lib/components/VFileInput';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCol,VContainer,VDialog,VDivider,VFileInput,VIcon,VImg,VList,VListItem,VProgressLinear,VRow,VSpacer,VTextField})\n","var AWS = require('../core');\nvar v4Credentials = require('../signers/v4_credentials');\nvar resolveRegionalEndpointsFlag = require('../config_regional_endpoint');\nvar regionUtil = require('../region_config');\n\n// Pull in managed upload extension\nrequire('../s3/managed_upload');\n\n/**\n * @api private\n */\nvar operationsWith200StatusCodeError = {\n  'completeMultipartUpload': true,\n  'copyObject': true,\n  'uploadPartCopy': true\n};\n\n/**\n * @api private\n */\n var regionRedirectErrorCodes = [\n  'AuthorizationHeaderMalformed', // non-head operations on virtual-hosted global bucket endpoints\n  'BadRequest', // head operations on virtual-hosted global bucket endpoints\n  'PermanentRedirect', // non-head operations on path-style or regional endpoints\n  301 // head operations on path-style or regional endpoints\n ];\n\nAWS.util.update(AWS.S3.prototype, {\n  /**\n   * @api private\n   */\n  getSignatureVersion: function getSignatureVersion(request) {\n    var defaultApiVersion = this.api.signatureVersion;\n    var userDefinedVersion = this._originalConfig ? this._originalConfig.signatureVersion : null;\n    var regionDefinedVersion = this.config.signatureVersion;\n    var isPresigned = request ? request.isPresigned() : false;\n    /*\n      1) User defined version specified:\n        a) always return user defined version\n      2) No user defined version specified:\n        a) default to lowest version the region supports\n        b) If using presigned urls, default to lowest version the region supports\n    */\n    if (userDefinedVersion) {\n      userDefinedVersion = userDefinedVersion === 'v2' ? 's3' : userDefinedVersion;\n      return userDefinedVersion;\n    }\n    if (isPresigned !== true) {\n      defaultApiVersion = 'v4';\n    } else if (regionDefinedVersion) {\n      defaultApiVersion = regionDefinedVersion;\n    }\n    return defaultApiVersion;\n  },\n\n  /**\n   * @api private\n   */\n  getSignerClass: function getSignerClass(request) {\n    var signatureVersion = this.getSignatureVersion(request);\n    return AWS.Signers.RequestSigner.getVersion(signatureVersion);\n  },\n\n  /**\n   * @api private\n   */\n  validateService: function validateService() {\n    var msg;\n    var messages = [];\n\n    // default to us-east-1 when no region is provided\n    if (!this.config.region) this.config.region = 'us-east-1';\n\n    if (!this.config.endpoint && this.config.s3BucketEndpoint) {\n      messages.push('An endpoint must be provided when configuring ' +\n                    '`s3BucketEndpoint` to true.');\n    }\n    if (messages.length === 1) {\n      msg = messages[0];\n    } else if (messages.length > 1) {\n      msg = 'Multiple configuration errors:\\n' + messages.join('\\n');\n    }\n    if (msg) {\n      throw AWS.util.error(new Error(),\n        {name: 'InvalidEndpoint', message: msg});\n    }\n  },\n\n  /**\n   * @api private\n   */\n  shouldDisableBodySigning: function shouldDisableBodySigning(request) {\n    var signerClass = this.getSignerClass();\n    if (this.config.s3DisableBodySigning === true && signerClass === AWS.Signers.V4\n        && request.httpRequest.endpoint.protocol === 'https:') {\n      return true;\n    }\n    return false;\n  },\n\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    var prependListener = true;\n    request.addListener('validate', this.validateScheme);\n    request.addListener('validate', this.validateBucketName, prependListener);\n    request.addListener('validate', this.optInUsEast1RegionalEndpoint, prependListener);\n\n    request.removeListener('validate',\n      AWS.EventListeners.Core.VALIDATE_REGION);\n    request.addListener('build', this.addContentType);\n    request.addListener('build', this.computeContentMd5);\n    request.addListener('build', this.computeSseCustomerKeyMd5);\n    request.addListener('build', this.populateURI);\n    request.addListener('afterBuild', this.addExpect100Continue);\n    request.addListener('extractError', this.extractError);\n    request.addListener('extractData', AWS.util.hoistPayloadMember);\n    request.addListener('extractData', this.extractData);\n    request.addListener('beforePresign', this.prepareSignedUrl);\n    if (this.shouldDisableBodySigning(request))  {\n      request.removeListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n      request.addListener('afterBuild', this.disableBodySigning);\n    }\n    //deal with ARNs supplied to Bucket\n    if (this.isAccessPointApplicable(request)) {\n      request.removeListener('validate', this.validateBucketName);\n      request.addListener('validate', this.validateAccessPointArn, prependListener);\n      request.addListener('validate', this.validateArnRegion);\n      request.removeListener('build', this.populateURI);\n      request.addListener('build', this.populateUriFromAccessPoint);\n      return;\n    }\n    //listeners regarding region inference\n    request.addListener('validate', this.validateBucketEndpoint);\n    request.addListener('validate', this.correctBucketRegionFromCache);\n    request.onAsync('extractError', this.requestBucketRegion);\n    if (AWS.util.isBrowser()) {\n      request.onAsync('retry', this.reqRegionForNetworkingError);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateScheme: function(req) {\n    var params = req.params,\n        scheme = req.httpRequest.endpoint.protocol,\n        sensitive = params.SSECustomerKey || params.CopySourceSSECustomerKey;\n    if (sensitive && scheme !== 'https:') {\n      var msg = 'Cannot send SSE keys over HTTP. Set \\'sslEnabled\\'' +\n        'to \\'true\\' in your configuration';\n      throw AWS.util.error(new Error(),\n        { code: 'ConfigError', message: msg });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBucketEndpoint: function(req) {\n    if (!req.params.Bucket && req.service.config.s3BucketEndpoint) {\n      var msg = 'Cannot send requests to root API with `s3BucketEndpoint` set.';\n      throw AWS.util.error(new Error(),\n        { code: 'ConfigError', message: msg });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isAccessPointApplicable: function hasBucketInParams(req) {\n    var inputShape = (req.service.api.operations[req.operation] || {}).input || {};\n    var inputMembers = inputShape.members || {};\n    if (\n      req.operation === 'createBucket' ||\n      !req.params.Bucket ||\n      !inputMembers.Bucket\n    ) return false;\n    if (!AWS.util.ARN.validate(req.params.Bucket)) return false;\n    return true;\n  },\n\n  /**\n   * Validate ARN supplied in Bucket parameter is a valid access point ARN\n   *\n   * @api private\n   */\n  validateAccessPointArn: function validateAccessPointArn(req) {\n    var parsedArn = AWS.util.ARN.parse(req.params.Bucket);\n    //avoid duplicated parsing in the future\n    req._parsedAccessPointArn = parsedArn;\n    var parsedArn = req._parsedAccessPointArn;\n    if (parsedArn.service !== 's3') {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidAccessPointARN',\n        message: 'expect \\'s3\\' in access point ARN service component'\n      });\n    }\n    if (!parsedArn.region) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidAccessPointARN',\n        message: 'Access point ARN region is empty'\n      });\n    }\n    if (\n      parsedArn.resource.indexOf('accesspoint:') !== 0 &&\n      parsedArn.resource.indexOf('accesspoint/') !== 0\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidAccessPointARN',\n        message: 'Access point ARN resource should begin with \\'accesspoint/\\''\n      });\n    }\n    var delimiter = parsedArn.resource['accesspoint'.length]; //can be ':' or '/'\n    if (parsedArn.resource.split(delimiter).length !== 2) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidAccessPointARN',\n        message: 'Too many resource parameters in access point ARN'\n      });\n    }\n    var accessPoint = parsedArn.resource.split(delimiter)[1];\n    var accessPointPrefix = accessPoint + '-' + parsedArn.accountId;\n    if (!req.service.isDnsCompatible(accessPointPrefix) || accessPointPrefix.match(/\\./)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidAccessPointARN',\n        message: 'Access point ARN is not DNS compatible. Got ' + accessPoint\n      });\n    }\n    //set parsed valid access point\n    req._parsedAccessPointArn.accessPoint = accessPoint;\n  },\n\n  /**\n   * @api private\n   */\n  validateArnRegion: function validateArnRegion(req) {\n    var useArnRegion = req.service.loadUseArnRegionConfig(req);\n    var regionFromArn = req._parsedAccessPointArn.region;\n    var clientRegion = req.service.config.region;\n    if (\n      clientRegion.indexOf('fips') >= 0 ||\n      regionFromArn.indexOf('fips') >= 0\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Access point endpoint is not compatible with FIPS region'\n      });\n    }\n    if (!useArnRegion && regionFromArn !== clientRegion) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Configured region conflicts with access point region'\n      });\n    } else if (\n      useArnRegion &&\n      regionUtil.getEndpointSuffix(regionFromArn) !== regionUtil.getEndpointSuffix(clientRegion)\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Configured region and access point region not in same partition'\n      });\n    }\n    if (req.service.config.useAccelerateEndpoint) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'useAccelerateEndpoint config is not supported with access point ARN'\n      });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  loadUseArnRegionConfig: function loadUseArnRegionConfig(req) {\n    var envName = 'AWS_S3_USE_ARN_REGION';\n    var configName = 's3_use_arn_region';\n    var useArnRegion = true;\n    var originalConfig = req.service._originalConfig || {};\n    if (req.service.config.s3UseArnRegion !== undefined) {\n      return req.service.config.s3UseArnRegion;\n    } else if (originalConfig.s3UseArnRegion !== undefined) {\n      useArnRegion = originalConfig.s3UseArnRegion === true;\n    } else if (AWS.util.isNode()) {\n      //load from environmental variable AWS_USE_ARN_REGION\n      if (process.env[envName]) {\n        var value = process.env[envName].trim().toLowerCase();\n        if (['false', 'true'].indexOf(value) < 0) {\n          throw AWS.util.error(new Error(), {\n            code: 'InvalidConfiguration',\n            message: envName + ' only accepts true or false. Got ' + process.env[envName],\n            retryable: false\n          });\n        }\n        useArnRegion = value === 'true';\n      } else {  //load from shared config property use_arn_region\n        var profiles = {};\n        var profile = {};\n        try {\n          profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader);\n          profile = profiles[process.env.AWS_PROFILE || AWS.util.defaultProfile];\n        } catch (e) {}\n        if (profile[configName]) {\n          if (['false', 'true'].indexOf(profile[configName].trim().toLowerCase()) < 0) {\n            throw AWS.util.error(new Error(), {\n              code: 'InvalidConfiguration',\n              message: configName + ' only accepts true or false. Got ' + profile[configName],\n              retryable: false\n            });\n          }\n          useArnRegion = profile[configName].trim().toLowerCase() === 'true';\n        }\n      }\n    }\n    req.service.config.s3UseArnRegion = useArnRegion;\n    return useArnRegion;\n  },\n\n  /**\n   * @api private\n   */\n  validateBucketName: function validateBucketName(req) {\n    var service = req.service;\n    var signatureVersion = service.getSignatureVersion(req);\n    var bucket = req.params && req.params.Bucket;\n    var key = req.params && req.params.Key;\n    var slashIndex = bucket && bucket.indexOf('/');\n    if (bucket && slashIndex >= 0) {\n      if (typeof key === 'string' && slashIndex > 0) {\n        req.params = AWS.util.copy(req.params);\n        // Need to include trailing slash to match sigv2 behavior\n        var prefix = bucket.substr(slashIndex + 1) || '';\n        req.params.Key = prefix + '/' + key;\n        req.params.Bucket = bucket.substr(0, slashIndex);\n      } else if (signatureVersion === 'v4') {\n        var msg = 'Bucket names cannot contain forward slashes. Bucket: ' + bucket;\n        throw AWS.util.error(new Error(),\n          { code: 'InvalidBucket', message: msg });\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isValidAccelerateOperation: function isValidAccelerateOperation(operation) {\n    var invalidOperations = [\n      'createBucket',\n      'deleteBucket',\n      'listBuckets'\n    ];\n    return invalidOperations.indexOf(operation) === -1;\n  },\n\n  /**\n   * When us-east-1 region endpoint configuration is set, in stead of sending request to\n   * global endpoint(e.g. 's3.amazonaws.com'), we will send request to\n   * 's3.us-east-1.amazonaws.com'.\n   * @api private\n   */\n  optInUsEast1RegionalEndpoint: function optInUsEast1RegionalEndpoint(req) {\n    var service = req.service;\n    var config = service.config;\n    config.s3UsEast1RegionalEndpoint = resolveRegionalEndpointsFlag(service._originalConfig, {\n      env: 'AWS_S3_US_EAST_1_REGIONAL_ENDPOINT',\n      sharedConfig: 's3_us_east_1_regional_endpoint',\n      clientConfig: 's3UsEast1RegionalEndpoint'\n    });\n    if (\n      !(service._originalConfig || {}).endpoint &&\n      req.httpRequest.region === 'us-east-1' &&\n      config.s3UsEast1RegionalEndpoint === 'regional' &&\n      req.httpRequest.endpoint.hostname.indexOf('s3.amazonaws.com') >= 0\n    ) {\n      var insertPoint = config.endpoint.indexOf('.amazonaws.com');\n      regionalEndpoint = config.endpoint.substring(0, insertPoint) +\n        '.us-east-1' + config.endpoint.substring(insertPoint);\n      req.httpRequest.updateEndpoint(regionalEndpoint);\n    }\n  },\n\n  /**\n   * S3 prefers dns-compatible bucket names to be moved from the uri path\n   * to the hostname as a sub-domain.  This is not possible, even for dns-compat\n   * buckets when using SSL and the bucket name contains a dot ('.').  The\n   * ssl wildcard certificate is only 1-level deep.\n   *\n   * @api private\n   */\n  populateURI: function populateURI(req) {\n    var httpRequest = req.httpRequest;\n    var b = req.params.Bucket;\n    var service = req.service;\n    var endpoint = httpRequest.endpoint;\n    if (b) {\n      if (!service.pathStyleBucketName(b)) {\n        if (service.config.useAccelerateEndpoint && service.isValidAccelerateOperation(req.operation)) {\n          if (service.config.useDualstack) {\n            endpoint.hostname = b + '.s3-accelerate.dualstack.amazonaws.com';\n          } else {\n            endpoint.hostname = b + '.s3-accelerate.amazonaws.com';\n          }\n        } else if (!service.config.s3BucketEndpoint) {\n          endpoint.hostname =\n            b + '.' + endpoint.hostname;\n        }\n\n        var port = endpoint.port;\n        if (port !== 80 && port !== 443) {\n          endpoint.host = endpoint.hostname + ':' +\n            endpoint.port;\n        } else {\n          endpoint.host = endpoint.hostname;\n        }\n\n        httpRequest.virtualHostedBucket = b; // needed for signing the request\n        service.removeVirtualHostedBucketFromPath(req);\n      }\n    }\n  },\n\n  /**\n   * Takes the bucket name out of the path if bucket is virtual-hosted\n   *\n   * @api private\n   */\n  removeVirtualHostedBucketFromPath: function removeVirtualHostedBucketFromPath(req) {\n    var httpRequest = req.httpRequest;\n    var bucket = httpRequest.virtualHostedBucket;\n    if (bucket && httpRequest.path) {\n      if (req.params && req.params.Key) {\n        var encodedS3Key = '/' + AWS.util.uriEscapePath(req.params.Key);\n        if (httpRequest.path.indexOf(encodedS3Key) === 0 && (httpRequest.path.length === encodedS3Key.length || httpRequest.path[encodedS3Key.length] === '?')) {\n          //path only contains key or path contains only key and querystring\n          return;\n        }\n      }\n      httpRequest.path = httpRequest.path.replace(new RegExp('/' + bucket), '');\n      if (httpRequest.path[0] !== '/') {\n        httpRequest.path = '/' + httpRequest.path;\n      }\n    }\n  },\n\n  /**\n   * When user supply an access point ARN in the Bucket parameter, we need to\n   * populate the URI according to the ARN.\n   * @api private\n   */\n  populateUriFromAccessPoint: function populateUriFromAccessPoint(req) {\n    if (req.service._originalConfig.endpoint) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Custom endpoint is not compatible with access point ARN'\n      });\n    }\n    if (req.service.config.s3ForcePathStyle) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Cannot construct path-style endpoint with access point'\n      });\n    }\n    var accessPointArn = req._parsedAccessPointArn;\n    var serviceName = req.service.config.useDualstack ?\n      's3-accesspoint.dualstack':\n      's3-accesspoint';\n    var endpoint = req.httpRequest.endpoint;\n    var dnsSuffix = regionUtil.getEndpointSuffix(accessPointArn.region);\n    var useArnRegion = req.service.config.s3UseArnRegion;\n    endpoint.hostname = [\n      accessPointArn.accessPoint + '-' + accessPointArn.accountId,\n      serviceName,\n      useArnRegion ? accessPointArn.region : req.service.config.region,\n      dnsSuffix\n    ].join('.');\n    endpoint.host = endpoint.hostname;\n    var encodedArn = AWS.util.uriEscape(req.params.Bucket);\n    var path = req.httpRequest.path;\n    //remove the Bucket value from path\n    req.httpRequest.path = path.replace(new RegExp('/' + encodedArn), '');\n    if (req.httpRequest.path[0] !== '/') {\n      req.httpRequest.path = '/' + req.httpRequest.path;\n    }\n    req.httpRequest.region = accessPointArn.region; //region used to sign\n  },\n\n  /**\n   * Adds Expect: 100-continue header if payload is greater-or-equal 1MB\n   * @api private\n   */\n  addExpect100Continue: function addExpect100Continue(req) {\n    var len = req.httpRequest.headers['Content-Length'];\n    if (AWS.util.isNode() && (len >= 1024 * 1024 || req.params.Body instanceof AWS.util.stream.Stream)) {\n      req.httpRequest.headers['Expect'] = '100-continue';\n    }\n  },\n\n  /**\n   * Adds a default content type if none is supplied.\n   *\n   * @api private\n   */\n  addContentType: function addContentType(req) {\n    var httpRequest = req.httpRequest;\n    if (httpRequest.method === 'GET' || httpRequest.method === 'HEAD') {\n      // Content-Type is not set in GET/HEAD requests\n      delete httpRequest.headers['Content-Type'];\n      return;\n    }\n\n    if (!httpRequest.headers['Content-Type']) { // always have a Content-Type\n      httpRequest.headers['Content-Type'] = 'application/octet-stream';\n    }\n\n    var contentType = httpRequest.headers['Content-Type'];\n    if (AWS.util.isBrowser()) {\n      if (typeof httpRequest.body === 'string' && !contentType.match(/;\\s*charset=/)) {\n        var charset = '; charset=UTF-8';\n        httpRequest.headers['Content-Type'] += charset;\n      } else {\n        var replaceFn = function(_, prefix, charsetName) {\n          return prefix + charsetName.toUpperCase();\n        };\n\n        httpRequest.headers['Content-Type'] =\n          contentType.replace(/(;\\s*charset=)(.+)$/, replaceFn);\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  computableChecksumOperations: {\n    putBucketCors: true,\n    putBucketLifecycle: true,\n    putBucketLifecycleConfiguration: true,\n    putBucketTagging: true,\n    deleteObjects: true,\n    putBucketReplication: true,\n    putObjectLegalHold: true,\n    putObjectRetention: true,\n    putObjectLockConfiguration: true\n  },\n\n  /**\n   * Checks whether checksums should be computed for the request.\n   * If the request requires checksums to be computed, this will always\n   * return true, otherwise it depends on whether {AWS.Config.computeChecksums}\n   * is set.\n   *\n   * @param req [AWS.Request] the request to check against\n   * @return [Boolean] whether to compute checksums for a request.\n   * @api private\n   */\n  willComputeChecksums: function willComputeChecksums(req) {\n    if (this.computableChecksumOperations[req.operation]) return true;\n    if (!this.config.computeChecksums) return false;\n\n    // TODO: compute checksums for Stream objects\n    if (!AWS.util.Buffer.isBuffer(req.httpRequest.body) &&\n        typeof req.httpRequest.body !== 'string') {\n      return false;\n    }\n\n    var rules = req.service.api.operations[req.operation].input.members;\n\n    // Sha256 signing disabled, and not a presigned url\n    if (req.service.shouldDisableBodySigning(req) && !Object.prototype.hasOwnProperty.call(req.httpRequest.headers, 'presigned-expires')) {\n      if (rules.ContentMD5 && !req.params.ContentMD5) {\n        return true;\n      }\n    }\n\n    // V4 signer uses SHA256 signatures so only compute MD5 if it is required\n    if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n      if (rules.ContentMD5 && !rules.ContentMD5.required) return false;\n    }\n\n    if (rules.ContentMD5 && !req.params.ContentMD5) return true;\n  },\n\n  /**\n   * A listener that computes the Content-MD5 and sets it in the header.\n   * @see AWS.S3.willComputeChecksums\n   * @api private\n   */\n  computeContentMd5: function computeContentMd5(req) {\n    if (req.service.willComputeChecksums(req)) {\n      var md5 = AWS.util.crypto.md5(req.httpRequest.body, 'base64');\n      req.httpRequest.headers['Content-MD5'] = md5;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  computeSseCustomerKeyMd5: function computeSseCustomerKeyMd5(req) {\n    var keys = {\n      SSECustomerKey: 'x-amz-server-side-encryption-customer-key-MD5',\n      CopySourceSSECustomerKey: 'x-amz-copy-source-server-side-encryption-customer-key-MD5'\n    };\n    AWS.util.each(keys, function(key, header) {\n      if (req.params[key]) {\n        var value = AWS.util.crypto.md5(req.params[key], 'base64');\n        req.httpRequest.headers[header] = value;\n      }\n    });\n  },\n\n  /**\n   * Returns true if the bucket name should be left in the URI path for\n   * a request to S3.  This function takes into account the current\n   * endpoint protocol (e.g. http or https).\n   *\n   * @api private\n   */\n  pathStyleBucketName: function pathStyleBucketName(bucketName) {\n    // user can force path style requests via the configuration\n    if (this.config.s3ForcePathStyle) return true;\n    if (this.config.s3BucketEndpoint) return false;\n\n    if (this.isDnsCompatible(bucketName)) {\n      return (this.config.sslEnabled && bucketName.match(/\\./)) ? true : false;\n    } else {\n      return true; // not dns compatible names must always use path style\n    }\n  },\n\n  /**\n   * Returns true if the bucket name is DNS compatible.  Buckets created\n   * outside of the classic region MUST be DNS compatible.\n   *\n   * @api private\n   */\n  isDnsCompatible: function isDnsCompatible(bucketName) {\n    var b = bucketName;\n    var domain = new RegExp(/^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/);\n    var ipAddress = new RegExp(/(\\d+\\.){3}\\d+/);\n    var dots = new RegExp(/\\.\\./);\n    return (b.match(domain) && !b.match(ipAddress) && !b.match(dots)) ? true : false;\n  },\n\n  /**\n   * @return [Boolean] whether response contains an error\n   * @api private\n   */\n  successfulResponse: function successfulResponse(resp) {\n    var req = resp.request;\n    var httpResponse = resp.httpResponse;\n    if (operationsWith200StatusCodeError[req.operation] &&\n        httpResponse.body.toString().match('<Error>')) {\n      return false;\n    } else {\n      return httpResponse.statusCode < 300;\n    }\n  },\n\n  /**\n   * @return [Boolean] whether the error can be retried\n   * @api private\n   */\n  retryableError: function retryableError(error, request) {\n    if (operationsWith200StatusCodeError[request.operation] &&\n        error.statusCode === 200) {\n      return true;\n    } else if (request._requestRegionForBucket &&\n        request.service.bucketRegionCache[request._requestRegionForBucket]) {\n      return false;\n    } else if (error && error.code === 'RequestTimeout') {\n      return true;\n    } else if (error &&\n        regionRedirectErrorCodes.indexOf(error.code) != -1 &&\n        error.region && error.region != request.httpRequest.region) {\n      request.httpRequest.region = error.region;\n      if (error.statusCode === 301) {\n        request.service.updateReqBucketRegion(request);\n      }\n      return true;\n    } else {\n      var _super = AWS.Service.prototype.retryableError;\n      return _super.call(this, error, request);\n    }\n  },\n\n  /**\n   * Updates httpRequest with region. If region is not provided, then\n   * the httpRequest will be updated based on httpRequest.region\n   *\n   * @api private\n   */\n  updateReqBucketRegion: function updateReqBucketRegion(request, region) {\n    var httpRequest = request.httpRequest;\n    if (typeof region === 'string' && region.length) {\n      httpRequest.region = region;\n    }\n    if (!httpRequest.endpoint.host.match(/s3(?!-accelerate).*\\.amazonaws\\.com$/)) {\n      return;\n    }\n    var service = request.service;\n    var s3Config = service.config;\n    var s3BucketEndpoint = s3Config.s3BucketEndpoint;\n    if (s3BucketEndpoint) {\n      delete s3Config.s3BucketEndpoint;\n    }\n    var newConfig = AWS.util.copy(s3Config);\n    delete newConfig.endpoint;\n    newConfig.region = httpRequest.region;\n\n    httpRequest.endpoint = (new AWS.S3(newConfig)).endpoint;\n    service.populateURI(request);\n    s3Config.s3BucketEndpoint = s3BucketEndpoint;\n    httpRequest.headers.Host = httpRequest.endpoint.host;\n\n    if (request._asm.currentState === 'validate') {\n      request.removeListener('build', service.populateURI);\n      request.addListener('build', service.removeVirtualHostedBucketFromPath);\n    }\n  },\n\n  /**\n   * Provides a specialized parser for getBucketLocation -- all other\n   * operations are parsed by the super class.\n   *\n   * @api private\n   */\n  extractData: function extractData(resp) {\n    var req = resp.request;\n    if (req.operation === 'getBucketLocation') {\n      var match = resp.httpResponse.body.toString().match(/>(.+)<\\/Location/);\n      delete resp.data['_'];\n      if (match) {\n        resp.data.LocationConstraint = match[1];\n      } else {\n        resp.data.LocationConstraint = '';\n      }\n    }\n    var bucket = req.params.Bucket || null;\n    if (req.operation === 'deleteBucket' && typeof bucket === 'string' && !resp.error) {\n      req.service.clearBucketRegionCache(bucket);\n    } else {\n      var headers = resp.httpResponse.headers || {};\n      var region = headers['x-amz-bucket-region'] || null;\n      if (!region && req.operation === 'createBucket' && !resp.error) {\n        var createBucketConfiguration = req.params.CreateBucketConfiguration;\n        if (!createBucketConfiguration) {\n          region = 'us-east-1';\n        } else if (createBucketConfiguration.LocationConstraint === 'EU') {\n          region = 'eu-west-1';\n        } else {\n          region = createBucketConfiguration.LocationConstraint;\n        }\n      }\n      if (region) {\n          if (bucket && region !== req.service.bucketRegionCache[bucket]) {\n            req.service.bucketRegionCache[bucket] = region;\n          }\n      }\n    }\n    req.service.extractRequestIds(resp);\n  },\n\n  /**\n   * Extracts an error object from the http response.\n   *\n   * @api private\n   */\n  extractError: function extractError(resp) {\n    var codes = {\n      304: 'NotModified',\n      403: 'Forbidden',\n      400: 'BadRequest',\n      404: 'NotFound'\n    };\n\n    var req = resp.request;\n    var code = resp.httpResponse.statusCode;\n    var body = resp.httpResponse.body || '';\n\n    var headers = resp.httpResponse.headers || {};\n    var region = headers['x-amz-bucket-region'] || null;\n    var bucket = req.params.Bucket || null;\n    var bucketRegionCache = req.service.bucketRegionCache;\n    if (region && bucket && region !== bucketRegionCache[bucket]) {\n      bucketRegionCache[bucket] = region;\n    }\n\n    var cachedRegion;\n    if (codes[code] && body.length === 0) {\n      if (bucket && !region) {\n        cachedRegion = bucketRegionCache[bucket] || null;\n        if (cachedRegion !== req.httpRequest.region) {\n          region = cachedRegion;\n        }\n      }\n      resp.error = AWS.util.error(new Error(), {\n        code: codes[code],\n        message: null,\n        region: region\n      });\n    } else {\n      var data = new AWS.XML.Parser().parse(body.toString());\n\n      if (data.Region && !region) {\n        region = data.Region;\n        if (bucket && region !== bucketRegionCache[bucket]) {\n          bucketRegionCache[bucket] = region;\n        }\n      } else if (bucket && !region && !data.Region) {\n        cachedRegion = bucketRegionCache[bucket] || null;\n        if (cachedRegion !== req.httpRequest.region) {\n          region = cachedRegion;\n        }\n      }\n\n      resp.error = AWS.util.error(new Error(), {\n        code: data.Code || code,\n        message: data.Message || null,\n        region: region\n      });\n    }\n    req.service.extractRequestIds(resp);\n  },\n\n  /**\n   * If region was not obtained synchronously, then send async request\n   * to get bucket region for errors resulting from wrong region.\n   *\n   * @api private\n   */\n  requestBucketRegion: function requestBucketRegion(resp, done) {\n    var error = resp.error;\n    var req = resp.request;\n    var bucket = req.params.Bucket || null;\n\n    if (!error || !bucket || error.region || req.operation === 'listObjects' ||\n        (AWS.util.isNode() && req.operation === 'headBucket') ||\n        (error.statusCode === 400 && req.operation !== 'headObject') ||\n        regionRedirectErrorCodes.indexOf(error.code) === -1) {\n      return done();\n    }\n    var reqOperation = AWS.util.isNode() ? 'headBucket' : 'listObjects';\n    var reqParams = {Bucket: bucket};\n    if (reqOperation === 'listObjects') reqParams.MaxKeys = 0;\n    var regionReq = req.service[reqOperation](reqParams);\n    regionReq._requestRegionForBucket = bucket;\n    regionReq.send(function() {\n      var region = req.service.bucketRegionCache[bucket] || null;\n      error.region = region;\n      done();\n    });\n  },\n\n   /**\n   * For browser only. If NetworkingError received, will attempt to obtain\n   * the bucket region.\n   *\n   * @api private\n   */\n   reqRegionForNetworkingError: function reqRegionForNetworkingError(resp, done) {\n    if (!AWS.util.isBrowser()) {\n      return done();\n    }\n    var error = resp.error;\n    var request = resp.request;\n    var bucket = request.params.Bucket;\n    if (!error || error.code !== 'NetworkingError' || !bucket ||\n        request.httpRequest.region === 'us-east-1') {\n      return done();\n    }\n    var service = request.service;\n    var bucketRegionCache = service.bucketRegionCache;\n    var cachedRegion = bucketRegionCache[bucket] || null;\n\n    if (cachedRegion && cachedRegion !== request.httpRequest.region) {\n      service.updateReqBucketRegion(request, cachedRegion);\n      done();\n    } else if (!service.isDnsCompatible(bucket)) {\n      service.updateReqBucketRegion(request, 'us-east-1');\n      if (bucketRegionCache[bucket] !== 'us-east-1') {\n        bucketRegionCache[bucket] = 'us-east-1';\n      }\n      done();\n    } else if (request.httpRequest.virtualHostedBucket) {\n      var getRegionReq = service.listObjects({Bucket: bucket, MaxKeys: 0});\n      service.updateReqBucketRegion(getRegionReq, 'us-east-1');\n      getRegionReq._requestRegionForBucket = bucket;\n\n      getRegionReq.send(function() {\n        var region = service.bucketRegionCache[bucket] || null;\n        if (region && region !== request.httpRequest.region) {\n          service.updateReqBucketRegion(request, region);\n        }\n        done();\n      });\n    } else {\n      // DNS-compatible path-style\n      // (s3ForcePathStyle or bucket name with dot over https)\n      // Cannot obtain region information for this case\n      done();\n    }\n   },\n\n  /**\n   * Cache for bucket region.\n   *\n   * @api private\n   */\n   bucketRegionCache: {},\n\n  /**\n   * Clears bucket region cache.\n   *\n   * @api private\n   */\n   clearBucketRegionCache: function(buckets) {\n    var bucketRegionCache = this.bucketRegionCache;\n    if (!buckets) {\n      buckets = Object.keys(bucketRegionCache);\n    } else if (typeof buckets === 'string') {\n      buckets = [buckets];\n    }\n    for (var i = 0; i < buckets.length; i++) {\n      delete bucketRegionCache[buckets[i]];\n    }\n    return bucketRegionCache;\n   },\n\n   /**\n    * Corrects request region if bucket's cached region is different\n    *\n    * @api private\n    */\n  correctBucketRegionFromCache: function correctBucketRegionFromCache(req) {\n    var bucket = req.params.Bucket || null;\n    if (bucket) {\n      var service = req.service;\n      var requestRegion = req.httpRequest.region;\n      var cachedRegion = service.bucketRegionCache[bucket];\n      if (cachedRegion && cachedRegion !== requestRegion) {\n        service.updateReqBucketRegion(req, cachedRegion);\n      }\n    }\n  },\n\n  /**\n   * Extracts S3 specific request ids from the http response.\n   *\n   * @api private\n   */\n  extractRequestIds: function extractRequestIds(resp) {\n    var extendedRequestId = resp.httpResponse.headers ? resp.httpResponse.headers['x-amz-id-2'] : null;\n    var cfId = resp.httpResponse.headers ? resp.httpResponse.headers['x-amz-cf-id'] : null;\n    resp.extendedRequestId = extendedRequestId;\n    resp.cfId = cfId;\n\n    if (resp.error) {\n      resp.error.requestId = resp.requestId || null;\n      resp.error.extendedRequestId = extendedRequestId;\n      resp.error.cfId = cfId;\n    }\n  },\n\n  /**\n   * Get a pre-signed URL for a given operation name.\n   *\n   * @note You must ensure that you have static or previously resolved\n   *   credentials if you call this method synchronously (with no callback),\n   *   otherwise it may not properly sign the request. If you cannot guarantee\n   *   this (you are using an asynchronous credential provider, i.e., EC2\n   *   IAM roles), you should always call this method with an asynchronous\n   *   callback.\n   * @note Not all operation parameters are supported when using pre-signed\n   *   URLs. Certain parameters, such as `SSECustomerKey`, `ACL`, `Expires`,\n   *   `ContentLength`, or `Tagging` must be provided as headers when sending a\n   *   request. If you are using pre-signed URLs to upload from a browser and\n   *   need to use these fields, see {createPresignedPost}.\n   * @note The default signer allows altering the request by adding corresponding\n   *   headers to set some parameters (e.g. Range) and these added parameters\n   *   won't be signed. You must use signatureVersion v4 to to include these\n   *   parameters in the signed portion of the URL and enforce exact matching\n   *   between headers and signed params in the URL.\n   * @note This operation cannot be used with a promise. See note above regarding\n   *   asynchronous credentials and use with a callback.\n   * @param operation [String] the name of the operation to call\n   * @param params [map] parameters to pass to the operation. See the given\n   *   operation for the expected operation parameters. In addition, you can\n   *   also pass the \"Expires\" parameter to inform S3 how long the URL should\n   *   work for.\n   * @option params Expires [Integer] (900) the number of seconds to expire\n   *   the pre-signed URL operation in. Defaults to 15 minutes.\n   * @param callback [Function] if a callback is provided, this function will\n   *   pass the URL as the second parameter (after the error parameter) to\n   *   the callback function.\n   * @return [String] if called synchronously (with no callback), returns the\n   *   signed URL.\n   * @return [null] nothing is returned if a callback is provided.\n   * @example Pre-signing a getObject operation (synchronously)\n   *   var params = {Bucket: 'bucket', Key: 'key'};\n   *   var url = s3.getSignedUrl('getObject', params);\n   *   console.log('The URL is', url);\n   * @example Pre-signing a putObject (asynchronously)\n   *   var params = {Bucket: 'bucket', Key: 'key'};\n   *   s3.getSignedUrl('putObject', params, function (err, url) {\n   *     console.log('The URL is', url);\n   *   });\n   * @example Pre-signing a putObject operation with a specific payload\n   *   var params = {Bucket: 'bucket', Key: 'key', Body: 'body'};\n   *   var url = s3.getSignedUrl('putObject', params);\n   *   console.log('The URL is', url);\n   * @example Passing in a 1-minute expiry time for a pre-signed URL\n   *   var params = {Bucket: 'bucket', Key: 'key', Expires: 60};\n   *   var url = s3.getSignedUrl('getObject', params);\n   *   console.log('The URL is', url); // expires in 60 seconds\n   */\n  getSignedUrl: function getSignedUrl(operation, params, callback) {\n    params = AWS.util.copy(params || {});\n    var expires = params.Expires || 900;\n\n    if (typeof expires !== 'number') {\n      throw AWS.util.error(new Error(),\n        { code: 'InvalidParameterException', message: 'The expiration must be a number, received ' + typeof expires });\n    }\n\n    delete params.Expires; // we can't validate this\n    var request = this.makeRequest(operation, params);\n\n    if (callback) {\n      AWS.util.defer(function() {\n        request.presign(expires, callback);\n      });\n    } else {\n      return request.presign(expires, callback);\n    }\n  },\n\n  /**\n   * @!method  getSignedUrlPromise()\n   *   Returns a 'thenable' promise that will be resolved with a pre-signed URL\n   *   for a given operation name.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @note Not all operation parameters are supported when using pre-signed\n   *      URLs. Certain parameters, such as `SSECustomerKey`, `ACL`, `Expires`,\n   *      `ContentLength`, or `Tagging` must be provided as headers when sending a\n   *      request. If you are using pre-signed URLs to upload from a browser and\n   *      need to use these fields, see {createPresignedPost}.\n   *   @param operation [String] the name of the operation to call\n   *   @param params [map] parameters to pass to the operation. See the given\n   *      operation for the expected operation parameters. In addition, you can\n   *      also pass the \"Expires\" parameter to inform S3 how long the URL should\n   *      work for.\n   *   @option params Expires [Integer] (900) the number of seconds to expire\n   *      the pre-signed URL operation in. Defaults to 15 minutes.\n   *   @callback fulfilledCallback function(url)\n   *     Called if the promise is fulfilled.\n   *     @param url [String] the signed url\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `refresh` call.\n   *   @example Pre-signing a getObject operation\n   *      var params = {Bucket: 'bucket', Key: 'key'};\n   *      var promise = s3.getSignedUrlPromise('getObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   *   @example Pre-signing a putObject operation with a specific payload\n   *      var params = {Bucket: 'bucket', Key: 'key', Body: 'body'};\n   *      var promise = s3.getSignedUrlPromise('putObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   *   @example Passing in a 1-minute expiry time for a pre-signed URL\n   *      var params = {Bucket: 'bucket', Key: 'key', Expires: 60};\n   *      var promise = s3.getSignedUrlPromise('getObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   */\n\n  /**\n   * Get a pre-signed POST policy to support uploading to S3 directly from an\n   * HTML form.\n   *\n   * @param params [map]\n   * @option params Bucket [String]     The bucket to which the post should be\n   *                                    uploaded\n   * @option params Expires [Integer]   (3600) The number of seconds for which\n   *                                    the presigned policy should be valid.\n   * @option params Conditions [Array]  An array of conditions that must be met\n   *                                    for the presigned policy to allow the\n   *                                    upload. This can include required tags,\n   *                                    the accepted range for content lengths,\n   *                                    etc.\n   * @see http://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-HTTPPOSTConstructPolicy.html\n   * @option params Fields [map]        Fields to include in the form. All\n   *                                    values passed in as fields will be\n   *                                    signed as exact match conditions.\n   * @param callback [Function]\n   *\n   * @note All fields passed in when creating presigned post data will be signed\n   *   as exact match conditions. Any fields that will be interpolated by S3\n   *   must be added to the fields hash after signing, and an appropriate\n   *   condition for such fields must be explicitly added to the Conditions\n   *   array passed to this function before signing.\n   *\n   * @example Presiging post data with a known key\n   *   var params = {\n   *     Bucket: 'bucket',\n   *     Fields: {\n   *       key: 'key'\n   *     }\n   *   };\n   *   s3.createPresignedPost(params, function(err, data) {\n   *     if (err) {\n   *       console.error('Presigning post data encountered an error', err);\n   *     } else {\n   *       console.log('The post data is', data);\n   *     }\n   *   });\n   *\n   * @example Presigning post data with an interpolated key\n   *   var params = {\n   *     Bucket: 'bucket',\n   *     Conditions: [\n   *       ['starts-with', '$key', 'path/to/uploads/']\n   *     ]\n   *   };\n   *   s3.createPresignedPost(params, function(err, data) {\n   *     if (err) {\n   *       console.error('Presigning post data encountered an error', err);\n   *     } else {\n   *       data.Fields.key = 'path/to/uploads/${filename}';\n   *       console.log('The post data is', data);\n   *     }\n   *   });\n   *\n   * @note You must ensure that you have static or previously resolved\n   *   credentials if you call this method synchronously (with no callback),\n   *   otherwise it may not properly sign the request. If you cannot guarantee\n   *   this (you are using an asynchronous credential provider, i.e., EC2\n   *   IAM roles), you should always call this method with an asynchronous\n   *   callback.\n   *\n   * @return [map]  If called synchronously (with no callback), returns a hash\n   *                with the url to set as the form action and a hash of fields\n   *                to include in the form.\n   * @return [null] Nothing is returned if a callback is provided.\n   *\n   * @callback callback function (err, data)\n   *  @param err [Error] the error object returned from the policy signer\n   *  @param data [map] The data necessary to construct an HTML form\n   *  @param data.url [String] The URL to use as the action of the form\n   *  @param data.fields [map] A hash of fields that must be included in the\n   *                           form for the upload to succeed. This hash will\n   *                           include the signed POST policy, your access key\n   *                           ID and security token (if present), etc. These\n   *                           may be safely included as input elements of type\n   *                           'hidden.'\n   */\n  createPresignedPost: function createPresignedPost(params, callback) {\n    if (typeof params === 'function' && callback === undefined) {\n      callback = params;\n      params = null;\n    }\n\n    params = AWS.util.copy(params || {});\n    var boundParams = this.config.params || {};\n    var bucket = params.Bucket || boundParams.Bucket,\n      self = this,\n      config = this.config,\n      endpoint = AWS.util.copy(this.endpoint);\n    if (!config.s3BucketEndpoint) {\n      endpoint.pathname = '/' + bucket;\n    }\n\n    function finalizePost() {\n      return {\n        url: AWS.util.urlFormat(endpoint),\n        fields: self.preparePostFields(\n          config.credentials,\n          config.region,\n          bucket,\n          params.Fields,\n          params.Conditions,\n          params.Expires\n        )\n      };\n    }\n\n    if (callback) {\n      config.getCredentials(function (err) {\n        if (err) {\n          callback(err);\n        }\n\n        callback(null, finalizePost());\n      });\n    } else {\n      return finalizePost();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  preparePostFields: function preparePostFields(\n    credentials,\n    region,\n    bucket,\n    fields,\n    conditions,\n    expiresInSeconds\n  ) {\n    var now = this.getSkewCorrectedDate();\n    if (!credentials || !region || !bucket) {\n      throw new Error('Unable to create a POST object policy without a bucket,'\n        + ' region, and credentials');\n    }\n    fields = AWS.util.copy(fields || {});\n    conditions = (conditions || []).slice(0);\n    expiresInSeconds = expiresInSeconds || 3600;\n\n    var signingDate = AWS.util.date.iso8601(now).replace(/[:\\-]|\\.\\d{3}/g, '');\n    var shortDate = signingDate.substr(0, 8);\n    var scope = v4Credentials.createScope(shortDate, region, 's3');\n    var credential = credentials.accessKeyId + '/' + scope;\n\n    fields['bucket'] = bucket;\n    fields['X-Amz-Algorithm'] = 'AWS4-HMAC-SHA256';\n    fields['X-Amz-Credential'] = credential;\n    fields['X-Amz-Date'] = signingDate;\n    if (credentials.sessionToken) {\n      fields['X-Amz-Security-Token'] = credentials.sessionToken;\n    }\n    for (var field in fields) {\n      if (fields.hasOwnProperty(field)) {\n        var condition = {};\n        condition[field] = fields[field];\n        conditions.push(condition);\n      }\n    }\n\n    fields.Policy = this.preparePostPolicy(\n      new Date(now.valueOf() + expiresInSeconds * 1000),\n      conditions\n    );\n    fields['X-Amz-Signature'] = AWS.util.crypto.hmac(\n      v4Credentials.getSigningKey(credentials, shortDate, region, 's3', true),\n      fields.Policy,\n      'hex'\n    );\n\n    return fields;\n  },\n\n  /**\n   * @api private\n   */\n  preparePostPolicy: function preparePostPolicy(expiration, conditions) {\n    return AWS.util.base64.encode(JSON.stringify({\n      expiration: AWS.util.date.iso8601(expiration),\n      conditions: conditions\n    }));\n  },\n\n  /**\n   * @api private\n   */\n  prepareSignedUrl: function prepareSignedUrl(request) {\n    request.addListener('validate', request.service.noPresignedContentLength);\n    request.removeListener('build', request.service.addContentType);\n    if (!request.params.Body) {\n      // no Content-MD5/SHA-256 if body is not provided\n      request.removeListener('build', request.service.computeContentMd5);\n    } else {\n      request.addListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n    }\n  },\n\n  /**\n   * @api private\n   * @param request\n   */\n  disableBodySigning: function disableBodySigning(request) {\n    var headers = request.httpRequest.headers;\n    // Add the header to anything that isn't a presigned url, unless that presigned url had a body defined\n    if (!Object.prototype.hasOwnProperty.call(headers, 'presigned-expires')) {\n      headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n    }\n  },\n\n  /**\n   * @api private\n   */\n  noPresignedContentLength: function noPresignedContentLength(request) {\n    if (request.params.ContentLength !== undefined) {\n      throw AWS.util.error(new Error(), {code: 'UnexpectedParameter',\n        message: 'ContentLength is not supported in pre-signed URLs.'});\n    }\n  },\n\n  createBucket: function createBucket(params, callback) {\n    // When creating a bucket *outside* the classic region, the location\n    // constraint must be set for the bucket and it must match the endpoint.\n    // This chunk of code will set the location constraint param based\n    // on the region (when possible), but it will not override a passed-in\n    // location constraint.\n    if (typeof params === 'function' || !params) {\n      callback = callback || params;\n      params = {};\n    }\n    var hostname = this.endpoint.hostname;\n    if (hostname !== this.api.globalEndpoint && !params.CreateBucketConfiguration) {\n      params.CreateBucketConfiguration = { LocationConstraint: this.config.region };\n    }\n    return this.makeRequest('createBucket', params, callback);\n  },\n\n  /**\n   * @see AWS.S3.ManagedUpload\n   * @overload upload(params = {}, [options], [callback])\n   *   Uploads an arbitrarily sized buffer, blob, or stream, using intelligent\n   *   concurrent handling of parts if the payload is large enough. You can\n   *   configure the concurrent queue size by setting `options`. Note that this\n   *   is the only operation for which the SDK can retry requests with stream\n   *   bodies.\n   *\n   *   @param (see AWS.S3.putObject)\n   *   @option (see AWS.S3.ManagedUpload.constructor)\n   *   @return [AWS.S3.ManagedUpload] the managed upload object that can call\n   *     `send()` or track progress.\n   *   @example Uploading a stream object\n   *     var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *     s3.upload(params, function(err, data) {\n   *       console.log(err, data);\n   *     });\n   *   @example Uploading a stream with concurrency of 1 and partSize of 10mb\n   *     var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *     var options = {partSize: 10 * 1024 * 1024, queueSize: 1};\n   *     s3.upload(params, options, function(err, data) {\n   *       console.log(err, data);\n   *     });\n   * @callback callback function(err, data)\n   *   @param err [Error] an error or null if no error occurred.\n   *   @param data [map] The response data from the successful upload:\n   *   @param data.Location [String] the URL of the uploaded object\n   *   @param data.ETag [String] the ETag of the uploaded object\n   *   @param data.Bucket [String]  the bucket to which the object was uploaded\n   *   @param data.Key [String] the key to which the object was uploaded\n   */\n  upload: function upload(params, options, callback) {\n    if (typeof options === 'function' && callback === undefined) {\n      callback = options;\n      options = null;\n    }\n\n    options = options || {};\n    options = AWS.util.merge(options || {}, {service: this, params: params});\n\n    var uploader = new AWS.S3.ManagedUpload(options);\n    if (typeof callback === 'function') uploader.send(callback);\n    return uploader;\n  }\n});\n\n/**\n * @api private\n */\nAWS.S3.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.getSignedUrlPromise = AWS.util.promisifyMethod('getSignedUrl', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.S3.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.getSignedUrlPromise;\n};\n\nAWS.util.addPromises(AWS.S3);\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAkCAIAAAC2bqvFAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH4wcXBxUG+HMlHgAAAiFJREFUWMNjZJp5lmEoAyaGIQ5GPTDqAQoBCxXN4mdj/vjrryA7sxIvO0kar3/48e3PvwHzADMjY4aWSKGe+Ib7H0pOPHGV4VvurEiSCabrbpx7821gPCDIzrzOTdlOkmdI5gEWJsaBdT2lHsjQEhlY11PkAUYGhkJd8SFcCqnysyvwsmGKP/nya82993g06glzqfGzD7wHeFiZsYofe/n12Mv7DAwMMtys+sJcDAwMl959f/zlF1xBj4WMmp7YYKwH4ECWh22qjayXHD8jAwMDA8N/Bobtjz5mHXmM7I3BWxPL8rAdC1D3hrkeklu85PiPBajL8bANAQ9Mt5GV4mLFFJfiYp1mIzvYPSDHw+Yhx49L1lOOX57akUBlDxiIcDISUMA1qD3w//8Qb05ffvcdv4JLb78Nag88+Pxr15NPuGR3P/l0//OvQe0BBgaGzMOPXn7/jSn+6vufzMOPhkAx+uDzL6sNN/egxsPep5+tNtygevDTqiZ+8PmX+7Y7ynzsBiKcDAwMF958v/vp5xDoUnrL88vyYKnCwpQEIYyJl18de/kVU8Hn338HhQfU+NnxNzPX3v/AgOGBe59+3v74cxDlAVJB36VXQ3hY5cCzz7OuvxmqHtj39HPQrnt/Kau9WQbE6Xc+/ey79HL29Tf/KG56MJI9Os3FwqQpwEGSlnuff77/+Rcy/jXwxei3P//OkjUaRUXXM4wO7o56YNQDALOVs5i8byVJAAAAAElFTkSuQmCC\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Assets.vue?vue&type=style&index=0&id=14a26e50&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Assets.vue?vue&type=style&index=0&id=14a26e50&scoped=true&lang=css&\"","var AWS = require('../core');\nvar byteLength = AWS.util.string.byteLength;\nvar Buffer = AWS.util.Buffer;\n\n/**\n * The managed uploader allows for easy and efficient uploading of buffers,\n * blobs, or streams, using a configurable amount of concurrency to perform\n * multipart uploads where possible. This abstraction also enables uploading\n * streams of unknown size due to the use of multipart uploads.\n *\n * To construct a managed upload object, see the {constructor} function.\n *\n * ## Tracking upload progress\n *\n * The managed upload object can also track progress by attaching an\n * 'httpUploadProgress' listener to the upload manager. This event is similar\n * to {AWS.Request~httpUploadProgress} but groups all concurrent upload progress\n * into a single event. See {AWS.S3.ManagedUpload~httpUploadProgress} for more\n * information.\n *\n * ## Handling Multipart Cleanup\n *\n * By default, this class will automatically clean up any multipart uploads\n * when an individual part upload fails. This behavior can be disabled in order\n * to manually handle failures by setting the `leavePartsOnError` configuration\n * option to `true` when initializing the upload object.\n *\n * @!event httpUploadProgress(progress)\n *   Triggered when the uploader has uploaded more data.\n *   @note The `total` property may not be set if the stream being uploaded has\n *     not yet finished chunking. In this case the `total` will be undefined\n *     until the total stream size is known.\n *   @note This event will not be emitted in Node.js 0.8.x.\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request and the `key` of the S3 object. Note that `total` may be undefined until the payload\n *     size is known.\n *   @context (see AWS.Request~send)\n */\nAWS.S3.ManagedUpload = AWS.util.inherit({\n  /**\n   * Creates a managed upload object with a set of configuration options.\n   *\n   * @note A \"Body\" parameter is required to be set prior to calling {send}.\n   * @note In Node.js, sending \"Body\" as {https://nodejs.org/dist/latest/docs/api/stream.html#stream_object_mode object-mode stream}\n   *   may result in upload hangs. Using buffer stream is preferable.\n   * @option options params [map] a map of parameters to pass to the upload\n   *   requests. The \"Body\" parameter is required to be specified either on\n   *   the service or in the params option.\n   * @note ContentMD5 should not be provided when using the managed upload object.\n   *   Instead, setting \"computeChecksums\" to true will enable automatic ContentMD5 generation\n   *   by the managed upload object.\n   * @option options queueSize [Number] (4) the size of the concurrent queue\n   *   manager to upload parts in parallel. Set to 1 for synchronous uploading\n   *   of parts. Note that the uploader will buffer at most queueSize * partSize\n   *   bytes into memory at any given time.\n   * @option options partSize [Number] (5mb) the size in bytes for each\n   *   individual part to be uploaded. Adjust the part size to ensure the number\n   *   of parts does not exceed {maxTotalParts}. See {minPartSize} for the\n   *   minimum allowed part size.\n   * @option options leavePartsOnError [Boolean] (false) whether to abort the\n   *   multipart upload if an error occurs. Set to true if you want to handle\n   *   failures manually.\n   * @option options service [AWS.S3] an optional S3 service object to use for\n   *   requests. This object might have bound parameters used by the uploader.\n   * @option options tags [Array<map>] The tags to apply to the uploaded object.\n   *   Each tag should have a `Key` and `Value` keys.\n   * @example Creating a default uploader for a stream object\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream}\n   *   });\n   * @example Creating an uploader with concurrency of 1 and partSize of 10mb\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     partSize: 10 * 1024 * 1024, queueSize: 1,\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream}\n   *   });\n   * @example Creating an uploader with tags\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream},\n   *     tags: [{Key: 'tag1', Value: 'value1'}, {Key: 'tag2', Value: 'value2'}]\n   *   });\n   * @see send\n   */\n  constructor: function ManagedUpload(options) {\n    var self = this;\n    AWS.SequentialExecutor.call(self);\n    self.body = null;\n    self.sliceFn = null;\n    self.callback = null;\n    self.parts = {};\n    self.completeInfo = [];\n    self.fillQueue = function() {\n      self.callback(new Error('Unsupported body payload ' + typeof self.body));\n    };\n\n    self.configure(options);\n  },\n\n  /**\n   * @api private\n   */\n  configure: function configure(options) {\n    options = options || {};\n    this.partSize = this.minPartSize;\n\n    if (options.queueSize) this.queueSize = options.queueSize;\n    if (options.partSize) this.partSize = options.partSize;\n    if (options.leavePartsOnError) this.leavePartsOnError = true;\n    if (options.tags) {\n      if (!Array.isArray(options.tags)) {\n        throw new Error('Tags must be specified as an array; ' +\n          typeof options.tags + ' provided.');\n      }\n      this.tags = options.tags;\n    }\n\n    if (this.partSize < this.minPartSize) {\n      throw new Error('partSize must be greater than ' +\n                      this.minPartSize);\n    }\n\n    this.service = options.service;\n    this.bindServiceObject(options.params);\n    this.validateBody();\n    this.adjustTotalBytes();\n  },\n\n  /**\n   * @api private\n   */\n  leavePartsOnError: false,\n\n  /**\n   * @api private\n   */\n  queueSize: 4,\n\n  /**\n   * @api private\n   */\n  partSize: null,\n\n  /**\n   * @readonly\n   * @return [Number] the minimum number of bytes for an individual part\n   *   upload.\n   */\n  minPartSize: 1024 * 1024 * 5,\n\n  /**\n   * @readonly\n   * @return [Number] the maximum allowed number of parts in a multipart upload.\n   */\n  maxTotalParts: 10000,\n\n  /**\n   * Initiates the managed upload for the payload.\n   *\n   * @callback callback function(err, data)\n   *   @param err [Error] an error or null if no error occurred.\n   *   @param data [map] The response data from the successful upload:\n   *     * `Location` (String) the URL of the uploaded object\n   *     * `ETag` (String) the ETag of the uploaded object\n   *     * `Bucket` (String) the bucket to which the object was uploaded\n   *     * `Key` (String) the key to which the object was uploaded\n   * @example Sending a managed upload object\n   *   var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *   var upload = new AWS.S3.ManagedUpload({params: params});\n   *   upload.send(function(err, data) {\n   *     console.log(err, data);\n   *   });\n   */\n  send: function(callback) {\n    var self = this;\n    self.failed = false;\n    self.callback = callback || function(err) { if (err) throw err; };\n\n    var runFill = true;\n    if (self.sliceFn) {\n      self.fillQueue = self.fillBuffer;\n    } else if (AWS.util.isNode()) {\n      var Stream = AWS.util.stream.Stream;\n      if (self.body instanceof Stream) {\n        runFill = false;\n        self.fillQueue = self.fillStream;\n        self.partBuffers = [];\n        self.body.\n          on('error', function(err) { self.cleanup(err); }).\n          on('readable', function() { self.fillQueue(); }).\n          on('end', function() {\n            self.isDoneChunking = true;\n            self.numParts = self.totalPartNumbers;\n            self.fillQueue.call(self);\n\n            if (self.isDoneChunking && self.totalPartNumbers >= 1 && self.doneParts === self.numParts) {\n              self.finishMultiPart();\n            }\n          });\n      }\n    }\n\n    if (runFill) self.fillQueue.call(self);\n  },\n\n  /**\n   * @!method  promise()\n   *   Returns a 'thenable' promise.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(data)\n   *     Called if the promise is fulfilled.\n   *     @param data [map] The response data from the successful upload:\n   *       `Location` (String) the URL of the uploaded object\n   *       `ETag` (String) the ETag of the uploaded object\n   *       `Bucket` (String) the bucket to which the object was uploaded\n   *       `Key` (String) the key to which the object was uploaded\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] an error or null if no error occurred.\n   *   @return [Promise] A promise that represents the state of the upload request.\n   *   @example Sending an upload request using promises.\n   *     var upload = s3.upload({Bucket: 'bucket', Key: 'key', Body: stream});\n   *     var promise = upload.promise();\n   *     promise.then(function(data) { ... }, function(err) { ... });\n   */\n\n  /**\n   * Aborts a managed upload, including all concurrent upload requests.\n   * @note By default, calling this function will cleanup a multipart upload\n   *   if one was created. To leave the multipart upload around after aborting\n   *   a request, configure `leavePartsOnError` to `true` in the {constructor}.\n   * @note Calling {abort} in the browser environment will not abort any requests\n   *   that are already in flight. If a multipart upload was created, any parts\n   *   not yet uploaded will not be sent, and the multipart upload will be cleaned up.\n   * @example Aborting an upload\n   *   var params = {\n   *     Bucket: 'bucket', Key: 'key',\n   *     Body: Buffer.alloc(1024 * 1024 * 25) // 25MB payload\n   *   };\n   *   var upload = s3.upload(params);\n   *   upload.send(function (err, data) {\n   *     if (err) console.log(\"Error:\", err.code, err.message);\n   *     else console.log(data);\n   *   });\n   *\n   *   // abort request in 1 second\n   *   setTimeout(upload.abort.bind(upload), 1000);\n   */\n  abort: function() {\n    var self = this;\n    //abort putObject request\n    if (self.isDoneChunking === true && self.totalPartNumbers === 1 && self.singlePart) {\n      self.singlePart.abort();\n    } else {\n      self.cleanup(AWS.util.error(new Error('Request aborted by user'), {\n        code: 'RequestAbortedError', retryable: false\n      }));\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBody: function validateBody() {\n    var self = this;\n    self.body = self.service.config.params.Body;\n    if (typeof self.body === 'string') {\n      self.body = AWS.util.buffer.toBuffer(self.body);\n    } else if (!self.body) {\n      throw new Error('params.Body is required');\n    }\n    self.sliceFn = AWS.util.arraySliceFn(self.body);\n  },\n\n  /**\n   * @api private\n   */\n  bindServiceObject: function bindServiceObject(params) {\n    params = params || {};\n    var self = this;\n    // bind parameters to new service object\n    if (!self.service) {\n      self.service = new AWS.S3({params: params});\n    } else {\n      var service = self.service;\n      var config = AWS.util.copy(service._originalConfig || {});\n      config.signatureVersion = service.getSignatureVersion();\n      self.service = new service.constructor.__super__(config);\n      self.service.config.params =\n        AWS.util.merge(self.service.config.params || {}, params);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  adjustTotalBytes: function adjustTotalBytes() {\n    var self = this;\n    try { // try to get totalBytes\n      self.totalBytes = byteLength(self.body);\n    } catch (e) { }\n\n    // try to adjust partSize if we know payload length\n    if (self.totalBytes) {\n      var newPartSize = Math.ceil(self.totalBytes / self.maxTotalParts);\n      if (newPartSize > self.partSize) self.partSize = newPartSize;\n    } else {\n      self.totalBytes = undefined;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isDoneChunking: false,\n\n  /**\n   * @api private\n   */\n  partPos: 0,\n\n  /**\n   * @api private\n   */\n  totalChunkedBytes: 0,\n\n  /**\n   * @api private\n   */\n  totalUploadedBytes: 0,\n\n  /**\n   * @api private\n   */\n  totalBytes: undefined,\n\n  /**\n   * @api private\n   */\n  numParts: 0,\n\n  /**\n   * @api private\n   */\n  totalPartNumbers: 0,\n\n  /**\n   * @api private\n   */\n  activeParts: 0,\n\n  /**\n   * @api private\n   */\n  doneParts: 0,\n\n  /**\n   * @api private\n   */\n  parts: null,\n\n  /**\n   * @api private\n   */\n  completeInfo: null,\n\n  /**\n   * @api private\n   */\n  failed: false,\n\n  /**\n   * @api private\n   */\n  multipartReq: null,\n\n  /**\n   * @api private\n   */\n  partBuffers: null,\n\n  /**\n   * @api private\n   */\n  partBufferLength: 0,\n\n  /**\n   * @api private\n   */\n  fillBuffer: function fillBuffer() {\n    var self = this;\n    var bodyLen = byteLength(self.body);\n\n    if (bodyLen === 0) {\n      self.isDoneChunking = true;\n      self.numParts = 1;\n      self.nextChunk(self.body);\n      return;\n    }\n\n    while (self.activeParts < self.queueSize && self.partPos < bodyLen) {\n      var endPos = Math.min(self.partPos + self.partSize, bodyLen);\n      var buf = self.sliceFn.call(self.body, self.partPos, endPos);\n      self.partPos += self.partSize;\n\n      if (byteLength(buf) < self.partSize || self.partPos === bodyLen) {\n        self.isDoneChunking = true;\n        self.numParts = self.totalPartNumbers + 1;\n      }\n      self.nextChunk(buf);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  fillStream: function fillStream() {\n    var self = this;\n    if (self.activeParts >= self.queueSize) return;\n\n    var buf = self.body.read(self.partSize - self.partBufferLength) ||\n              self.body.read();\n    if (buf) {\n      self.partBuffers.push(buf);\n      self.partBufferLength += buf.length;\n      self.totalChunkedBytes += buf.length;\n    }\n\n    if (self.partBufferLength >= self.partSize) {\n      // if we have single buffer we avoid copyfull concat\n      var pbuf = self.partBuffers.length === 1 ?\n        self.partBuffers[0] : Buffer.concat(self.partBuffers);\n      self.partBuffers = [];\n      self.partBufferLength = 0;\n\n      // if we have more than partSize, push the rest back on the queue\n      if (pbuf.length > self.partSize) {\n        var rest = pbuf.slice(self.partSize);\n        self.partBuffers.push(rest);\n        self.partBufferLength += rest.length;\n        pbuf = pbuf.slice(0, self.partSize);\n      }\n\n      self.nextChunk(pbuf);\n    }\n\n    if (self.isDoneChunking && !self.isDoneSending) {\n      // if we have single buffer we avoid copyfull concat\n      pbuf = self.partBuffers.length === 1 ?\n          self.partBuffers[0] : Buffer.concat(self.partBuffers);\n      self.partBuffers = [];\n      self.partBufferLength = 0;\n      self.totalBytes = self.totalChunkedBytes;\n      self.isDoneSending = true;\n\n      if (self.numParts === 0 || pbuf.length > 0) {\n        self.numParts++;\n        self.nextChunk(pbuf);\n      }\n    }\n\n    self.body.read(0);\n  },\n\n  /**\n   * @api private\n   */\n  nextChunk: function nextChunk(chunk) {\n    var self = this;\n    if (self.failed) return null;\n\n    var partNumber = ++self.totalPartNumbers;\n    if (self.isDoneChunking && partNumber === 1) {\n      var params = {Body: chunk};\n      if (this.tags) {\n        params.Tagging = this.getTaggingHeader();\n      }\n      var req = self.service.putObject(params);\n      req._managedUpload = self;\n      req.on('httpUploadProgress', self.progress).send(self.finishSinglePart);\n      self.singlePart = req; //save the single part request\n      return null;\n    } else if (self.service.config.params.ContentMD5) {\n      var err = AWS.util.error(new Error('The Content-MD5 you specified is invalid for multi-part uploads.'), {\n        code: 'InvalidDigest', retryable: false\n      });\n\n      self.cleanup(err);\n      return null;\n    }\n\n    if (self.completeInfo[partNumber] && self.completeInfo[partNumber].ETag !== null) {\n      return null; // Already uploaded this part.\n    }\n\n    self.activeParts++;\n    if (!self.service.config.params.UploadId) {\n\n      if (!self.multipartReq) { // create multipart\n        self.multipartReq = self.service.createMultipartUpload();\n        self.multipartReq.on('success', function(resp) {\n          self.service.config.params.UploadId = resp.data.UploadId;\n          self.multipartReq = null;\n        });\n        self.queueChunks(chunk, partNumber);\n        self.multipartReq.on('error', function(err) {\n          self.cleanup(err);\n        });\n        self.multipartReq.send();\n      } else {\n        self.queueChunks(chunk, partNumber);\n      }\n    } else { // multipart is created, just send\n      self.uploadPart(chunk, partNumber);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getTaggingHeader: function getTaggingHeader() {\n    var kvPairStrings = [];\n    for (var i = 0; i < this.tags.length; i++) {\n      kvPairStrings.push(AWS.util.uriEscape(this.tags[i].Key) + '=' +\n        AWS.util.uriEscape(this.tags[i].Value));\n    }\n\n    return kvPairStrings.join('&');\n  },\n\n  /**\n   * @api private\n   */\n  uploadPart: function uploadPart(chunk, partNumber) {\n    var self = this;\n\n    var partParams = {\n      Body: chunk,\n      ContentLength: AWS.util.string.byteLength(chunk),\n      PartNumber: partNumber\n    };\n\n    var partInfo = {ETag: null, PartNumber: partNumber};\n    self.completeInfo[partNumber] = partInfo;\n\n    var req = self.service.uploadPart(partParams);\n    self.parts[partNumber] = req;\n    req._lastUploadedBytes = 0;\n    req._managedUpload = self;\n    req.on('httpUploadProgress', self.progress);\n    req.send(function(err, data) {\n      delete self.parts[partParams.PartNumber];\n      self.activeParts--;\n\n      if (!err && (!data || !data.ETag)) {\n        var message = 'No access to ETag property on response.';\n        if (AWS.util.isBrowser()) {\n          message += ' Check CORS configuration to expose ETag header.';\n        }\n\n        err = AWS.util.error(new Error(message), {\n          code: 'ETagMissing', retryable: false\n        });\n      }\n      if (err) return self.cleanup(err);\n      //prevent sending part being returned twice (https://github.com/aws/aws-sdk-js/issues/2304)\n      if (self.completeInfo[partNumber] && self.completeInfo[partNumber].ETag !== null) return null;\n      partInfo.ETag = data.ETag;\n      self.doneParts++;\n      if (self.isDoneChunking && self.doneParts === self.numParts) {\n        self.finishMultiPart();\n      } else {\n        self.fillQueue.call(self);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  queueChunks: function queueChunks(chunk, partNumber) {\n    var self = this;\n    self.multipartReq.on('success', function() {\n      self.uploadPart(chunk, partNumber);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  cleanup: function cleanup(err) {\n    var self = this;\n    if (self.failed) return;\n\n    // clean up stream\n    if (typeof self.body.removeAllListeners === 'function' &&\n        typeof self.body.resume === 'function') {\n      self.body.removeAllListeners('readable');\n      self.body.removeAllListeners('end');\n      self.body.resume();\n    }\n\n    // cleanup multipartReq listeners\n    if (self.multipartReq) {\n      self.multipartReq.removeAllListeners('success');\n      self.multipartReq.removeAllListeners('error');\n      self.multipartReq.removeAllListeners('complete');\n      delete self.multipartReq;\n    }\n\n    if (self.service.config.params.UploadId && !self.leavePartsOnError) {\n      self.service.abortMultipartUpload().send();\n    } else if (self.leavePartsOnError) {\n      self.isDoneChunking = false;\n    }\n\n    AWS.util.each(self.parts, function(partNumber, part) {\n      part.removeAllListeners('complete');\n      part.abort();\n    });\n\n    self.activeParts = 0;\n    self.partPos = 0;\n    self.numParts = 0;\n    self.totalPartNumbers = 0;\n    self.parts = {};\n    self.failed = true;\n    self.callback(err);\n  },\n\n  /**\n   * @api private\n   */\n  finishMultiPart: function finishMultiPart() {\n    var self = this;\n    var completeParams = { MultipartUpload: { Parts: self.completeInfo.slice(1) } };\n    self.service.completeMultipartUpload(completeParams, function(err, data) {\n      if (err) {\n        return self.cleanup(err);\n      }\n\n      if (data && typeof data.Location === 'string') {\n        data.Location = data.Location.replace(/%2F/g, '/');\n      }\n\n      if (Array.isArray(self.tags)) {\n        for (var i = 0; i < self.tags.length; i++) {\n          self.tags[i].Value = String(self.tags[i].Value);\n        }\n        self.service.putObjectTagging(\n          {Tagging: {TagSet: self.tags}},\n          function(e, d) {\n            if (e) {\n              self.callback(e);\n            } else {\n              self.callback(e, data);\n            }\n          }\n        );\n      } else {\n        self.callback(err, data);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  finishSinglePart: function finishSinglePart(err, data) {\n    var upload = this.request._managedUpload;\n    var httpReq = this.request.httpRequest;\n    var endpoint = httpReq.endpoint;\n    if (err) return upload.callback(err);\n    data.Location =\n      [endpoint.protocol, '//', endpoint.host, httpReq.path].join('');\n    data.key = this.request.params.Key; // will stay undocumented\n    data.Key = this.request.params.Key;\n    data.Bucket = this.request.params.Bucket;\n    upload.callback(err, data);\n  },\n\n  /**\n   * @api private\n   */\n  progress: function progress(info) {\n    var upload = this._managedUpload;\n    if (this.operation === 'putObject') {\n      info.part = 1;\n      info.key = this.params.Key;\n    } else {\n      upload.totalUploadedBytes += info.loaded - this._lastUploadedBytes;\n      this._lastUploadedBytes = info.loaded;\n      info = {\n        loaded: upload.totalUploadedBytes,\n        total: upload.totalBytes,\n        part: this.params.PartNumber,\n        key: this.params.Key\n      };\n    }\n    upload.emit('httpUploadProgress', [info]);\n  }\n});\n\nAWS.util.mixin(AWS.S3.ManagedUpload, AWS.SequentialExecutor);\n\n/**\n * @api private\n */\nAWS.S3.ManagedUpload.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.promise = AWS.util.promisifyMethod('send', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.S3.ManagedUpload.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.promise;\n};\n\nAWS.util.addPromises(AWS.S3.ManagedUpload);\n\n/**\n * @api private\n */\nmodule.exports = AWS.S3.ManagedUpload;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['s3'] = {};\nAWS.S3 = Service.defineService('s3', ['2006-03-01']);\nrequire('../lib/services/s3');\nObject.defineProperty(apiLoader.services['s3'], '2006-03-01', {\n  get: function get() {\n    var model = require('../apis/s3-2006-03-01.min.json');\n    model.paginators = require('../apis/s3-2006-03-01.paginators.json').pagination;\n    model.waiters = require('../apis/s3-2006-03-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.S3;\n","var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n","// Styles\nimport './VChip.sass'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n// Components\nimport { VExpandXTransition } from '../transitions'\nimport VIcon from '../VIcon'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport { factory as GroupableFactory } from '../../mixins/groupable'\nimport Themeable from '../../mixins/themeable'\nimport { factory as ToggleableFactory } from '../../mixins/toggleable'\nimport Routable from '../../mixins/routable'\nimport Sizeable from '../../mixins/sizeable'\n\n// Utilities\nimport { breaking } from '../../util/console'\n\n// Types\nimport { PropValidator, PropType } from 'vue/types/options'\n\n/* @vue/component */\nexport default mixins(\n  Colorable,\n  Sizeable,\n  Routable,\n  Themeable,\n  GroupableFactory('chipGroup'),\n  ToggleableFactory('inputValue')\n).extend({\n  name: 'v-chip',\n\n  props: {\n    active: {\n      type: Boolean,\n      default: true,\n    },\n    activeClass: {\n      type: String,\n      default (): string | undefined {\n        if (!this.chipGroup) return ''\n\n        return this.chipGroup.activeClass\n      },\n    } as any as PropValidator<string>,\n    close: Boolean,\n    closeIcon: {\n      type: String,\n      default: '$delete',\n    },\n    disabled: Boolean,\n    draggable: Boolean,\n    filter: Boolean,\n    filterIcon: {\n      type: String,\n      default: '$complete',\n    },\n    label: Boolean,\n    link: Boolean,\n    outlined: Boolean,\n    pill: Boolean,\n    tag: {\n      type: String,\n      default: 'span',\n    },\n    textColor: String,\n    value: null as any as PropType<any>,\n  },\n\n  data: () => ({\n    proxyClass: 'v-chip--active',\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        'v-chip': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-chip--clickable': this.isClickable,\n        'v-chip--disabled': this.disabled,\n        'v-chip--draggable': this.draggable,\n        'v-chip--label': this.label,\n        'v-chip--link': this.isLink,\n        'v-chip--no-color': !this.color,\n        'v-chip--outlined': this.outlined,\n        'v-chip--pill': this.pill,\n        'v-chip--removable': this.hasClose,\n        ...this.themeClasses,\n        ...this.sizeableClasses,\n        ...this.groupClasses,\n      }\n    },\n    hasClose (): boolean {\n      return Boolean(this.close)\n    },\n    isClickable (): boolean {\n      return Boolean(\n        Routable.options.computed.isClickable.call(this) ||\n        this.chipGroup\n      )\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['outline', 'outlined'],\n      ['selected', 'input-value'],\n      ['value', 'active'],\n      ['@input', '@active.sync'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n  },\n\n  methods: {\n    click (e: MouseEvent): void {\n      this.$emit('click', e)\n\n      this.chipGroup && this.toggle()\n    },\n    genFilter (): VNode {\n      const children = []\n\n      if (this.isActive) {\n        children.push(\n          this.$createElement(VIcon, {\n            staticClass: 'v-chip__filter',\n            props: { left: true },\n          }, this.filterIcon)\n        )\n      }\n\n      return this.$createElement(VExpandXTransition, children)\n    },\n    genClose (): VNode {\n      return this.$createElement(VIcon, {\n        staticClass: 'v-chip__close',\n        props: {\n          right: true,\n          size: 18,\n        },\n        on: {\n          click: (e: Event) => {\n            e.stopPropagation()\n            e.preventDefault()\n\n            this.$emit('click:close')\n            this.$emit('update:active', false)\n          },\n        },\n      }, this.closeIcon)\n    },\n    genContent (): VNode {\n      return this.$createElement('span', {\n        staticClass: 'v-chip__content',\n      }, [\n        this.filter && this.genFilter(),\n        this.$slots.default,\n        this.hasClose && this.genClose(),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    const children = [this.genContent()]\n    let { tag, data } = this.generateRouteLink()\n\n    data.attrs = {\n      ...data.attrs,\n      draggable: this.draggable ? 'true' : undefined,\n      tabindex: this.chipGroup && !this.disabled ? 0 : data.attrs!.tabindex,\n    }\n    data.directives!.push({\n      name: 'show',\n      value: this.active,\n    })\n    data = this.setBackgroundColor(this.color, data)\n\n    const color = this.textColor || (this.outlined && this.color)\n\n    return h(tag, this.setTextColor(color, data), children)\n  },\n})\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar min = Math.min;\nvar nativeLastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : nativeLastIndexOf;\n"],"sourceRoot":""}