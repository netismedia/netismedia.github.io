(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["playlist_form"],{"87dd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Nama playlist"},model:{value:t.playlist.name,callback:function(e){t.$set(t.playlist,"name",e)},expression:"playlist.name"}})],1)],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"10"}},[t._v(" Rangkaian Asset ")]),a("v-col",{staticClass:"text-right",attrs:{cols:"2"}},[a("v-icon",{on:{click:t.onAddAssetClick}},[t._v("mdi-plus")])],1)],1),a("v-list",[t._l(t.playlist.data,(function(e,i){return[a("v-list-item",{key:e[0]+"_"+i},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",md:"9"}},[t._v(t._s(e[1]))]),a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"1"}},[t._v(" "+t._s(e[3])+" detik ")]),a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"2"}},[i!==t.playlist.data.length-1?a("v-icon",{on:{click:function(e){return t.moveDownAsset(i)}}},[t._v(" mdi-arrow-down ")]):t._e(),0!==i?a("v-icon",{on:{click:function(e){return t.moveUpAsset(i)}}},[t._v(" mdi-arrow-up ")]):t._e(),a("v-icon",{on:{click:function(e){return t.deleteAsset(i)}}},[t._v("mdi-delete-forever")]),a("v-icon",{on:{click:function(a){return t.onAlarmClick(e,i)}}},[t._v("mdi-clock-outline")])],1)],1)],1),i!==t.playlist.data.length-1?a("v-divider",{key:i}):t._e()]}))],2),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("v-btn",{attrs:{color:"primary",disabled:t.loading},on:{click:t.onCancelClick}},[t._v("Batal")]),t._v(" "),a("v-btn",{attrs:{color:"primary",disabled:!t.valid,loading:t.loading},on:{click:t.onSaveClick}},[t._v("Save")])],1)],1),a("v-dialog",{attrs:{"max-width":"360"},model:{value:t.dialogAssetList,callback:function(e){t.dialogAssetList=e},expression:"dialogAssetList"}},[a("v-card",[a("v-list",[t._l(t.assets,(function(e,i){return[a("v-list-item",{key:e[0],on:{click:function(a){return t.onAssetListClick(e)}}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[t._v(t._s(e[1]))])],1)],1),i!==t.assets.length-1?a("v-divider",{key:i}):t._e()]}))],2)],1)],1),a("v-dialog",{attrs:{"max-width":"320",persistent:""},model:{value:t.dialogDuration,callback:function(e){t.dialogDuration=e},expression:"dialogDuration"}},[a("v-card",[a("v-card-title",[t._v("Durasi")]),a("v-card-text",[null!==t.editedAsset?a("v-text-field",{attrs:{type:"number",label:"Durasi (detik)"},model:{value:t.editedAssetDuration,callback:function(e){t.editedAssetDuration=e},expression:"editedAssetDuration"}}):t._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary",disabled:t.loading},on:{click:function(e){t.dialogDuration=!1}}},[t._v("Batal")]),a("v-btn",{attrs:{text:"",color:"primary",loading:t.loading},on:{click:t.onOkDlgDurClick}},[t._v("Ok")])],1)],1)],1)],1)},s=[],n=(a("99af"),a("4160"),a("a434"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),r=a("db49"),l=a("0a85"),o={name:"PlaylistForm",data:function(){return{playlist:{name:"",data:[],created:0,updated:0},assets:[],dialogAssetList:!1,dialogDuration:!1,editedAssetDuration:0,editedAssetIndex:-1,editedAsset:null,formDuration:0,loading:!1,nameRules:[function(t){return!!t||"Nama harus diisi"},function(t){return t.length>=2||"Nama terlalu singkat"}]}},computed:{mode:function(){return Object.prototype.hasOwnProperty.call(this.$route.query,"mode")&&"edit"===this.$route.query.mode?"edit":"new"},playlistId:function(){return"edit"===this.mode?this.$route.query.id:void 0},valid:function(){return this.playlist.name.length>0&&this.playlist.data.length>0}},watch:{loading:function(){this.$store.commit("SET_LOADING",this.loading)}},created:function(){this.$store.commit("SET_TOOLBAR",{title:"new"===this.mode?"Playlist Baru":"Edit Playlist",backButton:!0}),"edit"===this.mode&&this.loadData()},methods:{loadData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,Object(l["c"])("".concat(r["a"],"/playlists/").concat(this.playlistId));case 3:if(e=t.sent,this.loading=!1,200===e.code){t.next=7;break}return t.abrupt("return");case 7:this.playlist.name=e.data.name,this.playlist.created=e.data.created,this.playlist.updated=e.data.updated,this.playlist.data=JSON.parse(e.data.data);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onAddAssetClick:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.assets.length){t.next=9;break}return this.loading=!0,t.next=4,Object(l["c"])("".concat(r["a"],"/assets"));case 4:if(e=t.sent,this.loading=!1,200===e.code){t.next=8;break}return t.abrupt("return");case 8:this.assets=e.data.rows;case 9:this.dialogAssetList=!0;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onCancelClick:function(){this.$router.go(-1)},onSaveClick:function(){"new"===this.mode?this.addPlaylist():"edit"===this.mode&&this.updatePlaylist()},onAlarmClick:function(t,e){this.editedAsset=t,this.editedAssetIndex=e,this.editedAssetDuration=t[3],this.dialogDuration=!0},onOkDlgDurClick:function(){this.playlist.data[this.editedAssetIndex][3]=this.editedAssetDuration,this.dialogDuration=!1},onAssetListClick:function(t){var e=r["c"];t[4]>0&&(e=t[4]),this.playlist.data.push([t[0],t[1],t[2],e]),this.dialogAssetList=!1},moveDownAsset:function(t){var e=this.playlist.data[t];this.playlist.data.splice(t,1),this.playlist.data.splice(t+1,0,e)},moveUpAsset:function(t){var e=this.playlist.data[t-1];this.playlist.data.splice(t-1,1),this.playlist.data.splice(t,0,e)},deleteAsset:function(t){this.playlist.data.splice(t,1)},addPlaylist:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],this.playlist.data.forEach((function(t){e.push([t[0],t[3]])})),a={name:this.playlist.name,data:e},this.loading=!0,t.next=6,Object(l["f"])("".concat(r["a"],"/playlists"),a);case 6:if(i=t.sent,this.loading=!1,200===i.code){t.next=11;break}return this.$store.commit("SHOW_APP_ALERT",{title:"Error",text:i.message}),t.abrupt("return");case 11:this.$store.commit("SHOW_SNACKBAR",{text:"Playlist telah disimpan"}),this.$router.go(-1);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),updatePlaylist:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],this.playlist.data.forEach((function(t){e.push([t[0],t[3]])})),a={name:this.playlist.name,data:e},this.loading=!0,t.next=6,Object(l["f"])("".concat(r["a"],"/playlists/").concat(this.playlistId),a);case 6:if(i=t.sent,this.loading=!1,200===i.code){t.next=11;break}return this.$store.commit("SHOW_APP_ALERT",{title:"Error",text:i.message}),t.abrupt("return");case 11:this.$store.commit("SHOW_SNACKBAR",{text:"Playlist telah diperbaharui"}),this.$router.go(-1);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},c=o,d=a("2877"),u=a("6544"),h=a.n(u),p=a("8336"),v=a("b0af"),m=a("99d9"),f=a("62ad"),g=a("a523"),y=a("169a"),k=a("ce7e"),A=a("132d"),b=a("8860"),x=a("da13"),w=a("0fd9"),_=a("2fa4"),D=a("8654"),C=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=C.exports;h()(C,{VBtn:p["a"],VCard:v["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCol:f["a"],VContainer:g["a"],VDialog:y["a"],VDivider:k["a"],VIcon:A["a"],VList:b["a"],VListItem:x["a"],VRow:w["a"],VSpacer:_["a"],VTextField:D["a"]})}}]);
//# sourceMappingURL=playlist_form.fdeef7b2.js.map